import{Db as r,Nb as h,Ob as l,Vb as a,dc as p,mb as o,xa as s}from"./chunk-CKWEI2SK.js";var c=function(e){return e.INNER="inner",e.OUTER="outer",e.CENTER="center",e}(c||{}),d=function(e){return e.HORIZONTAL="horizontal",e.VERTICAL="vertical",e.CURVED="curved",e}(d||{}),A=(()=>{class e{constructor(){this.onSpinStart=new s,this.onSpinComplete=new s,this.completedSpin=!1,this.isSpinning=!1}reset(){this.wheel.stopAnimation(!1),this.wheel.rotationAngle=0,this.wheel.ctx.clearRect(0,0,this.wheel.ctx.canvas.width,this.wheel.ctx.canvas.height),this.isSpinning=!1,this.completedSpin=!1,this.ngAfterViewInit()}ngOnInit(){}spin(){if(this.completedSpin||this.isSpinning)return;this.isSpinning=!0,this.onSpinStart.emit(null);let t=this.wheel.segments.filter(i=>!!i).find(({id:i})=>this.idToLandOn===i),n=t.endAngle-t.startAngle;this.wheel.animation.stopAngle=t.endAngle-n/4,this.wheel.startAnimation(),setTimeout(()=>{this.completedSpin=!0,this.onSpinComplete.emit(null)},this.spinDuration*1e3)}ngAfterViewInit(){let t=this.items;this.wheel=new Winwheel({numSegments:t.length,segments:t,innerRadius:this.innerRadius||0,outerRadius:this.height/2-20,centerY:this.height/2+20,textOrientation:this.textOrientation,textAligment:this.textAlignment,animation:{type:"spinToStop",duration:this.spinDuration,spins:this.spinAmount}}),TweenMax.ticker.addEventListener("tick",this.drawPointer.bind(this))}ngOnDestroy(){TweenMax.ticker.removeEventListener("tick")}drawPointer(){let t=this.wheel.ctx;t&&(t.save(),t.lineWidth=2,t.strokeStyle=this.pointerStrokeColor,t.fillStyle=this.pointerFillColor,t.beginPath(),t.moveTo(this.width/2-20,2),t.lineTo(this.width/2+20,2),t.lineTo(this.width/2,42),t.lineTo(this.width/2-20,2),t.stroke(),t.fill(),t.restore())}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275cmp=o({type:e,selectors:[["universe-wheel"]],inputs:{height:"height",idToLandOn:"idToLandOn",width:"width",items:"items",spinDuration:"spinDuration",spinAmount:"spinAmount",innerRadius:"innerRadius",pointerStrokeColor:"pointerStrokeColor",pointerFillColor:"pointerFillColor",disableSpinOnClick:"disableSpinOnClick",textOrientation:"textOrientation",textAlignment:"textAlignment"},outputs:{onSpinStart:"onSpinStart",onSpinComplete:"onSpinComplete"},decls:2,vars:2,consts:[["id","canvas",3,"click","width","height"]],template:function(n,i){n&1&&(h(0,"canvas",0),a("click",function(){return!i.disableSpinOnClick&&i.spin()}),p(1," \xA0\xA0\xA0\xA0Canvas not supported, use another browser. "),l()),n&2&&r("width",i.width)("height",i.height)},encapsulation:2})}}return e})();export{c as a,d as b,A as c};
