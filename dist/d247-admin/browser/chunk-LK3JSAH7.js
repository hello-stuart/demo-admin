import{a as g,b as B}from"./chunk-FGLKNMTP.js";import{f as L,h as U}from"./chunk-F4ECYANF.js";import{$b as M,Db as l,Nb as i,Ob as r,Sb as S,Sc as w,Tc as O,Uc as E,Vb as _,Wb as h,Xc as T,Yc as F,_c as N,ac as D,bb as n,bc as k,cb as c,dc as a,ec as p,ed as R,fc as P,hd as A,mb as x,mc as b,nc as f,oa as I,pa as y,sb as C,tc as m,vc as u}from"./chunk-CKWEI2SK.js";var q=d=>({"d-none":d}),$=(d,s)=>({"cl-green":d,"cl-red":s});function z(d,s){if(d&1){let t=S();i(0,"tr")(1,"td",13)(2,"a"),a(3),r()(),i(4,"td",13)(5,"a"),a(6),r()(),i(7,"td",10)(8,"span"),a(9),r()(),i(10,"td",13)(11,"a",14),_("click",function(){let e=I(t).$implicit,v=h();return y(v.goto(e.sportId,e.marketId))}),a(12),r()(),i(13,"td")(14,"span"),a(15),r()(),i(16,"td")(17,"span",10)(18,"b"),a(19),m(20,"number"),r()()(),i(21,"td")(22,"b",10),a(23),m(24,"number"),r()(),i(25,"td"),a(26),m(27,"date"),r()()}if(d&2){let t=s.$implicit,o=h();n(3),p(t.sportName),n(3),p(t.eventName),n(),l("ngClass",b(20,q,o.sportId!=="66102")),n(2),p(t.roundId?t.roundId:t.marketId),n(3),p(t.marketName),n(3),p(t.result),n(2),l("ngClass",f(22,$,t.pl>0,0>t.pl)),n(2),p(u(20,11,t.pl,"1.0-2")),n(3),l("ngClass",f(25,$,t.commission>0,0>=t.commission)),n(),p(u(24,14,t.commission,"1.0-2")),n(3),P(" ",u(27,17,t.createdAt,"medium"),"")}}function H(d,s){d&1&&(i(0,"tr",15)(1,"td",16),a(2,"No matching records found"),r()())}var j=class d{constructor(s,t,o){this.http=s;this.route=t;this.router=o;this.route.params.subscribe(e=>{this.eventId=e.eventId,this.sportId=e.sportId,this.isMaster=e.isMaster,this.dataSource=e.dataSource})}datatableElement;dtOptions={};startDate;endDate;eventId;sportId;rows=[];userid;reqForBets={};isMaster;dataSource;subUserReport;ngOnInit(){this.subUserReport=localStorage.getItem("subUserReport"),this.startDate=localStorage.getItem("startDate"),this.endDate=localStorage.getItem("endDate"),localStorage.getItem("fromUid")&&(this.userid=localStorage.getItem("fromUid")),this.getAccountStatement()}getAccountStatement(){this.reqForBets={startDate:this.startDate,endDate:this.endDate,eventId:this.eventId,sportId:this.sportId,dataSource:this.dataSource};let s=this;this.dtOptions={pagingType:"full_numbers",pageLength:10,serverSide:!0,searching:!0,autoWidth:!1,order:[0,"desc"],processing:!1,ajax:(t,o)=>{s.http.post(A.agentMarketsProfitloss,Object.assign(t,this.reqForBets)).subscribe(e=>{let v=e.data?.original?.data;this.rows=e.data?.original?.data,o({recordsTotal:e.data?.original?.recordsTotal,recordsFiltered:e.data?.original?.recordsFiltered,data:[]})})},columns:[{data:"sportName",orderable:!0},{data:"eventName",orderable:!0},{data:"marketId",orderable:!0,render:(t,o,e)=>e.sportId===66102?t:"&nbsp;"},{data:"marketName",orderable:!0},{data:"result",orderable:!0},{data:"pl",orderable:!0},{data:"commission",orderable:!0},{data:"createdAt",orderable:!0}]},console.log(this.dtOptions.columns)}rerender(){this.reqForBets={startDate:this.startDate,endDate:this.endDate,eventId:this.eventId,userId:this.userid,sportId:this.sportId,dataSource:this.dataSource},this.datatableElement.dtInstance.then(s=>{s.draw()})}goto(s,t,o){let e="";localStorage.setItem("roundId",t),this.subUserReport?e=this.router.serializeUrl(this.router.createUrlTree([`/userwise-profitloss/${this.sportId}/${t}/${this.dataSource}`])):e=this.router.serializeUrl(this.router.createUrlTree([`/userBetHistory/${this.sportId}/${t}/${this.dataSource}/master`])),window.open(e,"_blank")}static \u0275fac=function(t){return new(t||d)(c(R),c(L),c(U))};static \u0275cmp=x({type:d,selectors:[["app-profit-loss-markets"]],viewQuery:function(t,o){if(t&1&&M(g,5),t&2){let e;D(e=k())&&(o.datatableElement=e.first)}},decls:29,vars:6,consts:[[1,"card","card-accent-primary"],[1,"game-heading"],[1,"card-header-title"],[1,"card-body","account-detail-body"],[1,"row"],[1,"col-12",2,"overflow","auto"],[1,"table-responsive","table","table-striped"],["datatable","","role","table","aria-busy","false","aria-colcount","6",1,"table","table-bordered","table-striped",3,"dtOptions"],["role","rowgroup"],["role","row"],[3,"ngClass"],[4,"ngFor","ngForOf"],["class","odd",4,"ngIf"],[1,"border-right-black"],[1,"plLink",3,"click"],[1,"odd"],["valign","top","colspan","11",1,"nofound"]],template:function(t,o){t&1&&(i(0,"div",0)(1,"div",1)(2,"span",2),a(3,"Profit & Loss Markets"),r()(),i(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"table",7)(9,"thead",8)(10,"tr",9)(11,"th"),a(12,"Sport Name"),r(),i(13,"th"),a(14,"Event Name"),r(),i(15,"th",10),a(16,"Market Id"),r(),i(17,"th"),a(18,"Market Name"),r(),i(19,"th"),a(20,"Result"),r(),i(21,"th"),a(22,"Profit & Loss"),r(),i(23,"th"),a(24,"Commission"),r(),i(25,"th"),a(26,"Settle Time"),r()()(),C(27,z,28,28,"tr",11)(28,H,3,0,"tr",12),r()()()()()()),t&2&&(n(8),l("dtOptions",o.dtOptions),n(7),l("ngClass",b(4,q,o.sportId!=="66102")),n(12),l("ngForOf",o.rows),n(),l("ngIf",(o.rows==null?null:o.rows.length)==0))},dependencies:[N,w,O,E,F,T,B,g],styles:[".card-report[_ngcontent-%COMP%]{padding:10px 10px 0;border-bottom:1px solid var(--my-account-total-box-border-btm)}.form-group[_ngcontent-%COMP%]{margin-bottom:1rem}.form-control[_ngcontent-%COMP%]{display:block;width:100%;padding:.375rem .75rem;font-size:.875rem;line-height:1.5;color:#5c6873;background-color:#fff;background-clip:padding-box;border:1px solid #e4e7ea;border-radius:.25rem;height:38px!important;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out}select.form-control[_ngcontent-%COMP%]:not([size]):not([multiple]){height:calc(2.0625rem + 2px)}.game-heading[_ngcontent-%COMP%]{font-weight:700;font-size:15px;padding:5px 10px}table.dataTable[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], table.dataTable[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:8px 10px}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{text-align:center!important}  table tbody tr td.dt-empty{display:none!important}"]})};export{j as a};
