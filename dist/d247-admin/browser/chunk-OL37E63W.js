import{a as E}from"./chunk-YAPTLMR7.js";import{a as B}from"./chunk-AZX2OHK4.js";import{a as j}from"./chunk-SBFAXTSC.js";import{c as D,d as z}from"./chunk-A5YAUSYP.js";import"./chunk-3J6HDLJO.js";import"./chunk-KMJAJAAH.js";import"./chunk-QZIUMNBJ.js";import{m as R,q as N}from"./chunk-6542H3SY.js";import{f as I}from"./chunk-F4ECYANF.js";import{Cb as v,Db as d,Nb as s,O as b,Ob as o,Pb as l,Qb as A,Rb as C,Sc as M,Tc as O,Uc as P,Wb as u,bb as a,cb as p,dc as c,ec as h,gc as _,hd as S,mb as k,nc as w,sb as g,tc as f,uc as y}from"./chunk-CKWEI2SK.js";import"./chunk-ZR4K4ZIC.js";var V=(r,t)=>({"title-player-1":r,"title-player-2":t});function W(r,t){if(r&1&&(s(0,"div",9)(1,"div",10)(2,"div",11)(3,"div",12)(4,"b",13),c(5),o()(),s(6,"div",14),l(7,"i",15),s(8,"div",16),c(9," R:"),s(10,"span",17),c(11),f(12,"shortNumber"),f(13,"shortNumber"),o()()()(),s(14,"div",18)(15,"div",19)(16,"span",20)(17,"b"),c(18),o()()()(),s(19,"div",21),c(20,"0"),o()()()),r&2){let e=t.$implicit,n=t.index,i=u(2);a(5),h(e.marketName),a(2),v("data-bs-target","#hands-"+n),a(),d("id","hands-"+n),a(3),_("",y(12,7,e==null?null:e.min),"-",y(13,9,e==null?null:e.max),""),a(4),d("ngClass",(i.game==null?null:i.game.status)=="SUSPEND"||i.game.length==0?"suspended":""),a(3),h(e.runners[0].price.back[0].price)}}function L(r,t){r&1&&l(0,"div",22)}function Y(r,t){if(r&1&&(A(0),s(1,"div",4)(2,"h4",5),c(3),o(),s(4,"div",6),g(5,W,21,11,"div",7),o()(),g(6,L,1,0,"div",8),C()),r&2){let e=t.$implicit,n=t.index,i=u();a(2),d("ngClass",w(4,V,n===0,n===1)),a(),h(i.capitalize(i.winnerMarketArray.runnersName[e.selectionId])),a(2),d("ngForOf",i.marketArray),a(),d("ngIf",n===0)}}var F=class r{constructor(t,e,n,i,m){this.route=t;this.toaster=e;this.casinoService=n;this.backendService=i;this.encyDecy=m;this.eventid=this.route.snapshot.params.id,this._roomId="",this.message.id=this.eventid}subscription;subscription2;message={type:"1",id:""};eventid;getRoundId="";runnersName={};marketArray=[];game={};_roomId;timer;winnerMarketArray;playerACards;playerBCards;gameroundId;marketId;selectedCell;split_arr;changeValue;RoundWinner;currentRunnerPrice;isDesktop;winningAmount;eventName;counter=0;theme;resultcounter=0;ngOnDestroy(){let t={type:"2",id:""};this.encyDecy.sendMessageToSocket(t),this.subscription&&this.subscription.unsubscribe(),this.subscription2&&this.subscription2.unsubscribe()}ngOnInit(){this.route.params.subscribe(t=>{let e=t.id}),this.encyDecy.generateEncryptionKey("",this.message),this.subscription=this.encyDecy.getMarketData().subscribe((t=[])=>{if(t){this.getRoundId=localStorage.getItem("roundID");let e=JSON.parse(t);Array.isArray(e.data)?e?.data[0]&&(e.type=="1"&&(this.marketArray=e?.data[0]?.marketArr,this.game=e?.data[0],this.game.marketArr=this.marketArray?this.marketArray:e?.data[0]?.marketArr,this.eventName=e?.data[0]?.eventName,this.winnerMarketArray=this.game?.marketArr?this.game?.marketArr[0]:""),this.handleEventResponse(e,0)):this.handleEventResponse(e,0),this.game&&(this.winnerMarketArray=this.game?.marketArr?this.game?.marketArr[0]:"",this.marketArray=this.game.marketArr,this.gameroundId=this.game.roundId,this.game.eventName=this.eventName?this.eventName:this.game.eventName,this.backendService.updateRoundId(this.game),(this.getRoundId!=this.game.roundId||this.getRoundId=="")&&(localStorage.setItem("roundID",this.game.roundId),this.getResults(),this.selectedCell=""),this.playerACards=this.game?.cardsArr?.PLAYER_A,this.playerBCards=this.game?.cardsArr?.PLAYER_B,this.winnerMarketArray=this.game.marketArr?this.game.marketArr[0]:"",this.runnersName=this.winnerMarketArray.runnersName,this.marketArray=this.game.marketArr),e.type=="3"}}),this.getResults()}handleEventResponse(t,e){if(Array.isArray(t))t.forEach(n=>{this.marketObjManager(n)});else{let n=t;this.marketObjManager(n);return}}marketObjManager(t){let e=t;if(e&&e.type=="1")if("data"in e&&this.counter==0&&e.data.marketArr&&e.data._id)this.marketArray=e.data.marketArr,this.game=this.marketArray?this.marketArray:e.data,this.game=e.data,this.eventName=e.data.eventName,this.counter=1;else{if("marketArr"in e?.data&&Array.isArray(e.data.marketArr)&&(this.game.marketArr=e?.data?.marketArr),"cardsArr"in e?.data&&(Array.isArray(e?.data?.cardsArr)||(this.game.cardsArr=e?.data?.cardsArr)),"roundId"in e&&(this.game.roundId=e?.roundId),"roundId"in e?.data&&(this.game.roundId=e?.data?.roundId),"status"in e?.data&&(this.game.status=e?.data?.status),"resultsArr"in e?.data){for(let i in e?.data?.resultsArr[0]?.runners)e.data?.resultsArr[0]?.runners[i]=="WINNER"&&(this.RoundWinner=e?.data?.resultsArr[0]?.runnersName[i],this.backendService.setResultData(this.RoundWinner));setTimeout(()=>{this.RoundWinner=null,this.winningAmount=null,this.backendService.setResultData(this.RoundWinner),this.backendService.setResultWinningAmount(this.winningAmount)},5e3)}var n=Object.keys(e?.data)[0];if(n.includes(".")){this.split_arr=n.split("."),Object.entries(e.data).forEach(([,T])=>this.changeValue=T);let i=parseInt(this.split_arr[1]),m=this.split_arr[3],x=this.split_arr[6];this.split_arr[7]=="size"&&(this.marketArray[i].runners[m].price.back[x].size=this.changeValue),this.split_arr[7]=="price"&&(this.marketArray[i].runners[m].price.back[x].price=this.changeValue),this.split_arr[4]==="status"&&(this.marketArray[i].runners[m].status=this.changeValue)}}}getEventOdds(){this.backendService.getCasinoEventOdds(this.eventid).subscribe(t=>{t.meta.status_code==200?(this.game=t?.data,this.marketArray=this.game?.marketArr,this.playerACards=this.game?.cardsArr?.PLAYER_A,this.playerBCards=this.game?.cardsArr?.PLAYER_B,this.winnerMarketArray=this.game?.marketArr?this.game?.marketArr[0]:"",this.runnersName=this.winnerMarketArray.runnersName):this.toaster.error(t.meta.message,"",{positionClass:"toast-top-right"})})}trackByFn(t,e){return t}ngAfterViewInit(){}getResults(){this.backendService.getAllRecordsByPost(S.getCasinoResultURL,{eventId:this.eventid}).pipe(b()).subscribe(t=>{this.backendService.updateResultstream(t.data)},t=>{let e=t})}splitMarketName(t){let e=t.indexOf("(");return e!==-1?t.substring(0,e).trim():t}capitalize(t){return t?t.replace(/\w\S*/g,e=>e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()):""}static \u0275fac=function(e){return new(e||r)(p(I),p(R),p(B),p(N),p(z))};static \u0275cmp=k({type:r,selectors:[["app-poker"]],decls:7,vars:1,consts:[[1,"casino-detail"],["id","myTabContent",1,"casino-box","mb-2","tab-content","d-flex","justify-content-between","flex-column","flex-lg-row"],[4,"ngFor","ngForOf"],[1,"showInMobile"],["id","pattern","role","tabpanel","aria-labelledby","pattern-tab",1,"tab-pan"],[1,"",3,"ngClass"],[1,"casino-row-container","pattern-content"],["class","casino-col-container pattern-col",4,"ngFor","ngForOf"],["class","poker20center d-none d-lg-flex ",4,"ngIf"],[1,"casino-col-container","pattern-col"],[1,"casino-box-row","pattern"],[1,"casino-box-id","w-100","mb-1"],[1,"nation-text",2,"position","relative"],[2,"text-wrap","nowrap"],[1,"position-relative"],["data-bs-toggle","collapse","aria-expanded","false",1,"fas","fa-info-circle","collapsed"],[1,"icon-range","collapse",3,"id"],[1,"small-txt"],[1,"poker6box"],[1,"casino-nation-name",3,"ngClass"],[1,"text-end","me-1","flex-odds"],[1,"casino-book","text-center","w-100","book-black"],[1,"poker20center","d-none","d-lg-flex"]],template:function(e,n){e&1&&(s(0,"div"),l(1,"app-video-player"),o(),s(2,"div",0)(3,"div",1),g(4,Y,7,7,"ng-container",2),o(),s(5,"div",3),l(6,"app-resultbar"),o()()),e&2&&(a(4),d("ngForOf",n.winnerMarketArray==null?null:n.winnerMarketArray.runners))},dependencies:[j,E,P,M,O,D],styles:["i[_ngcontent-%COMP%]{font-size:14px;cursor:pointer}.casino-detail[_ngcontent-%COMP%]{padding:5px;box-shadow:none;border-radius:0;line-height:22px;letter-spacing:0;font-family:Noto Sans;font-size:14px;box-shadow:0 2px 6px #e2e2e2}.casino-detail[_ngcontent-%COMP%]:hover{box-shadow:0 2px 7px #bbb}.title-player-1[_ngcontent-%COMP%]{color:#ef910f!important}.title-player-2[_ngcontent-%COMP%]{color:#fc4242!important}.casino-row-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.casino-col-container[_ngcontent-%COMP%]{width:49%;margin-right:1%;margin-bottom:10px}.casino-box-row[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;padding:2px 0;align-items:center;position:relative}.casino-box-id[_ngcontent-%COMP%]{font-size:11px;padding-left:5px;height:22px;position:relative;display:flex;justify-content:space-between}.icon-range[_ngcontent-%COMP%]{position:absolute;min-width:71.17px;left:0;top:100%;background-color:#16191c;padding:4px;max-width:100%;word-wrap:break-word;font-size:12px;right:0;transition:.1s;text-transform:capitalize;color:#aaafb5;z-index:150}.poker6box[_ngcontent-%COMP%]{border:2px solid #73bbef;border-radius:4px;padding:2px;width:100%;color:#333;cursor:pointer;height:40px;position:relative}.poker6box[_ngcontent-%COMP%]   .casino-nation-name[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;justify-content:center;align-items:center;padding:4px;background-color:#72bbef17}.poker6box[_ngcontent-%COMP%]   .casino-nation-name[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{line-height:1}.flex-odds[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:flex-end;flex-direction:column}.flex-odds[_ngcontent-%COMP%]   b[_ngcontent-%COMP%]{font-size:16px;padding-left:5px;font-weight:400;height:22px;width:100%;display:block}.flex-odds[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:11px;padding-left:5px;height:22px;width:100%}.player-card[_ngcontent-%COMP%]{position:relative;z-index:1;width:auto;margin-left:2px;text-align:center;display:inline-block}.player-card[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:auto;display:inline-block}.player-card[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:24px}.player-card[_ngcontent-%COMP%]:last-child{margin-left:6px}.pattern[_ngcontent-%COMP%]   .casino-box-id[_ngcontent-%COMP%]{justify-content:center;column-gap:5px}.nation-text[_ngcontent-%COMP%]{font-size:12px;font-weight:400!important}.pattern-col[_ngcontent-%COMP%]{width:27.66%;margin-right:1%!important;flex:auto}.casino-book[_ngcontent-%COMP%]{height:22px;font-size:12px;line-height:18px;text-align:center;font-weight:400;width:100%}.poker20center[_ngcontent-%COMP%]{width:2px;background-color:gray}.tab-pan[_ngcontent-%COMP%]{width:100%}@media (min-width: 992px){.tab-pan[_ngcontent-%COMP%]{width:49%}}@media (max-width: 500px){.pattern-col[_ngcontent-%COMP%]{width:48.66%}}@media screen and (min-width: 1280px){.pattern-col[_ngcontent-%COMP%], .casino-col-container[_ngcontent-%COMP%]{width:27.66%;margin-right:1%!important;flex:auto}}"]})};export{F as PokerComponent};
