import{a as T}from"./chunk-YAPTLMR7.js";import{a as z}from"./chunk-SBFAXTSC.js";import{c as B,d as F}from"./chunk-A5YAUSYP.js";import"./chunk-3J6HDLJO.js";import"./chunk-KMJAJAAH.js";import"./chunk-QZIUMNBJ.js";import{m as E,q as R}from"./chunk-6542H3SY.js";import{f as M}from"./chunk-F4ECYANF.js";import{Cb as _,Db as l,Nb as i,O as x,Ob as s,Pb as h,Sc as I,Tc as P,Vb as y,Wb as w,Yc as O,_c as N,bb as r,cb as g,dc as o,ec as f,fc as p,gc as S,hd as D,mb as k,mc as c,sb as C,tc as m,uc as u}from"./chunk-CKWEI2SK.js";import"./chunk-ZR4K4ZIC.js";var b=d=>({"active-tab":d}),v=d=>({"d-flex":d});function W(d,e){if(d&1&&(i(0,"div",12)(1,"div",13)(2,"b"),o(3),s()(),i(4,"div",14),h(5,"i",15),i(6,"div",16),o(7," R:"),i(8,"span"),o(9),m(10,"shortNumber"),m(11,"shortNumber"),s()()(),i(12,"div",17)(13,"div",18),o(14),m(15,"number"),i(16,"div",19),o(17,"0"),s()()(),i(18,"div",17)(19,"div",18),o(20),m(21,"number"),i(22,"div",19),o(23,"0"),s()()(),i(24,"div",17)(25,"div",18),o(26),m(27,"number"),i(28,"div",19),o(29,"0"),s()()()()),d&2){let n=e.$implicit,t=e.index,a=w();r(3),f(n.marketName),r(2),_("data-bs-target","#range"+t),r(),l("id","range"+t),r(3),S("",u(10,14,n.min),"-",u(11,16,n.max),""),r(3),l("ngClass",c(24,v,a.isDragon)),r(),l("ngClass",n.runners[0].status=="SUSPEND"||a.game.status=="SUSPEND"?"suspended":a.selectedCell==n.runners[0].selectionId?"selected":""),r(),p(" ",u(15,18,n.runners[2].price.back[0].price)," "),r(4),l("ngClass",c(26,v,a.isTiger)),r(),l("ngClass",n.runners[0].status=="SUSPEND"||a.game.status=="SUSPEND"?"suspended":a.selectedCell==n.runners[0].selectionId?"selected":""),r(),p(" ",u(21,20,n.runners[0].price.back[0].price)," "),r(4),l("ngClass",c(28,v,a.isLion)),r(),l("ngClass",n.runners[0].status=="SUSPEND"||a.game.status=="SUSPEND"?"suspended":a.selectedCell==n.runners[0].selectionId?"selected":""),r(),p(" ",u(27,22,n.runners[1].price.back[0].price)," ")}}var L=class d{constructor(e,n,t,a){this.route=e;this.toaster=n;this.backendService=t;this.encyDecy=a;this.eventid=this.route.snapshot.params.id,this._roomId="",this.message.id=this.eventid}subscription;subscription2;message={type:"1",id:""};runnersName={};_roomId;game;timer;theme;loader;counter=0;eventid;betType;marketId;split_arr;userCount;eventName;resultcounter=0;betplaceObj;gameroundId;RoundWinner;marketArray;playerBCards;selectedCell;playerACards;winningAmount;isValueBetsSlip=0;getRoundId="";changeValue;isBetsSlipOpened="";totalMatchedBets;winnerMarketArray;betSelectedPlayer;currentRunnerPrice;betSlip="game";isDragon=!0;isTiger=!1;isLion=!1;ngOnInit(){this.encyDecy.generateEncryptionKey("",this.message),this.subscription=this.encyDecy.getMarketData().subscribe((e=[])=>{if(e){this.getRoundId=localStorage.getItem("roundID");let n=JSON.parse(e);Array.isArray(n.data)?(n.type=="1"&&(this.marketArray=n.data[0].marketArr,this.game=n.data[0],this.game.marketArr=this.marketArray?this.marketArray:n.data[0].marketArr,this.eventName=n.data[0].eventName,this.userCount=n?.user_count,this.backendService.setUserCount(this.userCount),this.winnerMarketArray=this.game?.marketArr?this.game?.marketArr[0]:""),this.handleEventResponse(n,0)):this.handleEventResponse(n,0),this.game&&(this.winnerMarketArray=this.game?.marketArr?this.game?.marketArr[0]:"",this.marketArray=this.game.marketArr,this.gameroundId=this.game.roundId,this.game.eventName=this.eventName?this.eventName:this.game.eventName,this.backendService.updateRoundId(this.game),(this.getRoundId!=this.game.roundId||this.getRoundId=="")&&(localStorage.setItem("roundID",this.game.roundId),this.getResults(),this.selectedCell="",this.betSelectedPlayer=""),this.playerACards=this.game?.cardsArr?.PLAYER_A,this.playerBCards=this.game?.cardsArr?.PLAYER_B,this.winnerMarketArray=this.game.marketArr?this.game.marketArr[0]:"",this.runnersName=this.winnerMarketArray.runnersName,this.marketArray=this.game.marketArr),n.type=="3"&&(this.userCount=n?.user_count,this.backendService.setUserCount(this.userCount))}}),this.getResults()}getEventOdds(){this.backendService.getCasinoEventOdds(this.eventid).subscribe(e=>{e.meta.status_code==200?(this.game=e?.data,this.marketArray=this.game?.marketArr,this.playerACards=this.game?.cardsArr?.PLAYER_A,this.playerBCards=this.game?.cardsArr?.PLAYER_B,this.winnerMarketArray=this.game?.marketArr?this.game?.marketArr[0]:"",this.runnersName=this.winnerMarketArray.runnersName):this.toaster.error(e.meta.message,"",{positionClass:"toast-top-center"})})}handleEventResponse(e,n){if(Array.isArray(e))e.forEach(t=>{this.marketObjManager(t)});else{let t=e;this.marketObjManager(t);return}}marketObjManager(e){if(e.type=="1")if("data"in e&&this.counter==0&&e.data.marketArr&&e.data._id)this.marketArray=e.data.marketArr,this.game=this.marketArray?this.marketArray:e.data,this.game=e.data,this.eventName=e.data.eventName,this.counter=1;else{if("marketArr"in e?.data&&Array.isArray(e.data.marketArr)&&(this.game.marketArr=e?.data?.marketArr),"cardsArr"in e?.data&&(Array.isArray(e.data.cardsArr)||(this.game.cardsArr=e?.data?.cardsArr)),"roundId"in e&&(this.game.roundId=e?.roundId),"roundId"in e.data&&(this.game.roundId=e?.data?.roundId),"status"in e?.data&&(this.game.status=e?.data?.status),"resultsArr"in e?.data){for(let t in e?.data?.resultsArr[0]?.runners)e.data?.resultsArr[0]?.runners[t]=="WINNER"&&(this.RoundWinner=e?.data?.resultsArr[0]?.runnersName[t],this.backendService.setResultData(this.RoundWinner)),t==this.betSelectedPlayer&&e.data?.resultsArr[0]?.runners[t]=="WINNER"&&setTimeout(()=>{this.backendService.setResultWinningAmount(this.winningAmount),this.backendService.setResultSparkData(!0)},1e3);setTimeout(()=>{this.RoundWinner=null,this.winningAmount=null,this.backendService.setResultData(this.RoundWinner),this.backendService.setResultWinningAmount(this.winningAmount)},5e3)}var n=Object.keys(e?.data)[0];if(n.includes(".")){this.split_arr=n.split("."),Object.entries(e.data).forEach(([,U])=>this.changeValue=U);let t=parseInt(this.split_arr[1]),a=this.split_arr[3],A=this.split_arr[6];this.split_arr[7]=="size"&&(this.marketArray[t].runners[a].price.back[A].size=this.changeValue),this.split_arr[7]=="price"&&(this.marketArray[t].runners[a].price.back[A].price=this.changeValue)}}e&&e.type=="3"&&(this.userCount=e?.user_count,this.backendService.setUserCount(this.userCount))}trackByFn(e,n){return e}ngAfterViewInit(){}getResults(){this.backendService.getAllRecordsByPost(D.getCasinoResultURL,{eventId:this.eventid}).pipe(x()).subscribe(e=>{this.backendService.updateResultstream(e.data)},e=>{let n=e})}ngOnDestroy(){let e={type:"2",id:""};this.subscription&&this.subscription.unsubscribe(),this.subscription2&&this.subscription2.unsubscribe(),this.encyDecy.sendMessageToSocket(e),this.subscription&&this.subscription.unsubscribe()}splitMarketName(e){return e?e.charAt(0):""}toggleNavTabs(e){e==="dragon"?(this.isDragon=!0,this.isTiger=!1,this.isLion=!1):e==="tiger"?(this.isDragon=!1,this.isTiger=!0,this.isLion=!1):e==="lion"&&(this.isDragon=!1,this.isTiger=!1,this.isLion=!0)}static \u0275fac=function(n){return new(n||d)(g(M),g(E),g(R),g(F))};static \u0275cmp=k({type:d,selectors:[["app-dtl-teenpatti"]],decls:31,vars:13,consts:[[1,"casino-detail"],[1,"casino-container"],[1,"casino-tabs"],[1,"nav-tabs",2,"list-style","none"],[1,"toggle-btn",3,"click"],[1,"toggle-btn-link",3,"ngClass"],[1,"teen-one-day-left"],[1,"casino-header","row","mb-0"],[1,"casino-nation-name"],[1,"casino-bl-box"],["class","casino-market-row",4,"ngFor","ngForOf"],[1,"showInMobile"],[1,"casino-market-row"],[1,"casino-info-name"],[1,"float-right","dtl-bet-info"],["data-bs-toggle","collapse",1,"fas","fa-info-circle"],[1,"icon-range","collapse","bet-info-card",3,"id"],[1,"casino-bl-box","mobile-casino-bl-box",3,"ngClass"],[1,"market-bet-field-container",3,"ngClass"],[1,"market-bet-value","mobile-bet-value"]],template:function(n,t){n&1&&(i(0,"div"),h(1,"app-video-player"),s(),i(2,"div",0)(3,"div",1)(4,"div",2)(5,"ul",3)(6,"li",4),y("click",function(){return t.toggleNavTabs("dragon")}),i(7,"a",5),o(8,"Dragon"),s()(),i(9,"li",4),y("click",function(){return t.toggleNavTabs("tiger")}),i(10,"a",5),o(11,"Tiger"),s()(),i(12,"li",4),y("click",function(){return t.toggleNavTabs("lion")}),i(13,"a",5),o(14,"Lion"),s()()()(),i(15,"div",6)(16,"div",7)(17,"div",8),h(18,"div"),s(),i(19,"div",9)(20,"b"),o(21),s()(),i(22,"div",9)(23,"b"),o(24),s()(),i(25,"div",9)(26,"b"),o(27),s()()(),C(28,W,30,30,"div",10),s()(),i(29,"div",11),h(30,"app-resultbar"),s()()),n&2&&(r(7),l("ngClass",c(7,b,t.isDragon)),r(3),l("ngClass",c(9,b,t.isTiger)),r(3),l("ngClass",c(11,b,t.isLion)),r(8),f(t.splitMarketName(t.winnerMarketArray==null?null:t.winnerMarketArray.runnersName[t.winnerMarketArray==null||t.winnerMarketArray.runners[2]==null?null:t.winnerMarketArray.runners[2].selectionId])),r(3),p(" ",t.splitMarketName(t.winnerMarketArray==null?null:t.winnerMarketArray.runnersName[t.winnerMarketArray==null||t.winnerMarketArray.runners[0]==null?null:t.winnerMarketArray.runners[0].selectionId]),""),r(3),p(" ",t.splitMarketName(t.winnerMarketArray==null?null:t.winnerMarketArray.runnersName[t.winnerMarketArray==null||t.winnerMarketArray.runners[1]==null?null:t.winnerMarketArray.runners[1].selectionId]),""),r(),l("ngForOf",t.marketArray))},dependencies:[N,I,P,O,z,T,B],styles:[".casino-detail[_ngcontent-%COMP%]{padding:10px 10px 40px;background-color:#f8f8fb;border-radius:0 0 8px 8px;box-shadow:0 2px 6px #e2e2e2}.casino-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-between;width:100%}.teen-one-day-left[_ngcontent-%COMP%], .teen-one-day-right[_ngcontent-%COMP%]{width:100%}.casino-header[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;padding:2px 0;align-items:center;position:relative}.casino-nation-name[_ngcontent-%COMP%]{background-color:transparent;padding:0;width:20%;position:relative;height:45px;align-items:center;display:flex}.casino-bl-box[_ngcontent-%COMP%]{width:calc(25% - 4px);margin-right:6px}.casino-market-row[_ngcontent-%COMP%]{display:flex;padding:2px 0;align-items:center;position:relative;margin-bottom:20px}.casino-info-name[_ngcontent-%COMP%]{width:25%;position:relative;height:45px;align-items:center;display:flex;padding:4px 5px 4px 4px;background-color:#ddd}.dtl-bet-info[_ngcontent-%COMP%]{position:absolute;z-index:1;width:25%;text-align:right;padding-right:5px}.bet-info-div[_ngcontent-%COMP%]{position:absolute;top:100%;background-color:#16191c;padding:4px;max-width:100%;word-wrap:break-word;font-size:12px;z-index:10;right:0;transition:.1s;text-transform:capitalize;color:#aaafb5;z-index:150}.casino-bl-box[_ngcontent-%COMP%]{width:calc(25% - 4px);margin-right:6px;display:flex;justify-content:center;align-items:center;flex-wrap:wrap}.market-bet-field-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;background-color:#d6dedbd6;border:2px solid #72bbef;width:100%;height:45px;position:relative;border-radius:4px}.market-bet-value[_ngcontent-%COMP%]{position:absolute;bottom:-20px;font-size:12px}.lock-icon[_ngcontent-%COMP%]{width:15px}.card-symbol-icon[_ngcontent-%COMP%], .casino-card-icon[_ngcontent-%COMP%]{width:16px}.teen-one-day-center[_ngcontent-%COMP%]{width:2px;background-color:gray}.bet-info-card[_ngcontent-%COMP%]{position:absolute;top:100%;background-color:#16191c;padding:4px;max-width:100%;word-wrap:break-word;font-size:12px;z-index:10;right:0;transition:.1s;text-transform:capitalize;color:#aaafb5;z-index:150}.casino-tabs[_ngcontent-%COMP%]{height:36px;background-color:transparent;margin-bottom:10px;justify-content:flex-start;border-radius:0;width:100%}.nav-tabs[_ngcontent-%COMP%]{display:flex;position:relative;flex-wrap:nowrap;overflow:hidden;scroll-behavior:smooth;white-space:nowrap;margin:0;padding:0}.toggle-btn[_ngcontent-%COMP%]{flex:1 1 0;background-color:#3c444b;margin:1px;text-align:center;padding-bottom:4px}.toggle-btn-link[_ngcontent-%COMP%]{text-decoration:none;color:#fff;padding-top:0;padding-left:12px;padding-right:12px;border:0;text-align:center}.active-tab[_ngcontent-%COMP%]{color:#fdcf13!important}@media (max-width: 767px){.mobile-casino-bl-box[_ngcontent-%COMP%]{display:none}.casino-bl-box[_ngcontent-%COMP%]{width:100%}.casino-info-name[_ngcontent-%COMP%], .dtl-bet-info[_ngcontent-%COMP%]{width:50%}.casino-bl-box[_ngcontent-%COMP%]{width:calc(50% - 4px)}.casino-header[_ngcontent-%COMP%]{display:none}.market-bet-value[_ngcontent-%COMP%]{position:static}.market-bet-field-container[_ngcontent-%COMP%]{flex-direction:column}}@media (min-width: 768px){.casino-tabs[_ngcontent-%COMP%]{display:none}}i[_ngcontent-%COMP%]{cursor:pointer}@media (max-width: 320px){.casino-info-name[_ngcontent-%COMP%]{font-size:11px;padding-right:12px}}"]})};export{L as DtlTeenpattiComponent};
