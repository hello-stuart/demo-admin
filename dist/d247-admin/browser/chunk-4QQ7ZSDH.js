import{a as M}from"./chunk-YAPTLMR7.js";import{a as D}from"./chunk-PW5J7ZGW.js";import{c as z,d as W}from"./chunk-3BRWB67J.js";import"./chunk-5UJXZMZS.js";import"./chunk-ACVM4ET5.js";import"./chunk-QZIUMNBJ.js";import{m as O,q as R}from"./chunk-TKUFSEQW.js";import{f as E}from"./chunk-F4ECYANF.js";import{Db as c,Nb as n,O as w,Ob as o,Pb as x,Qb as I,Rb as b,Sc as C,Tc as _,Uc as B,Wb as m,_c as P,bb as s,cb as u,dc as d,ec as p,fc as A,gc as v,hd as N,mb as S,sb as h,tc as y,uc as g}from"./chunk-CKWEI2SK.js";import"./chunk-ZR4K4ZIC.js";function T(a,e){if(a&1&&(I(0),n(1,"div",11)(2,"span",12),d(3),o()(),b()),a&2){let t=e.$implicit,i=m(2);s(),c("ngClass",i.winnerMarketArray.runners[0].status=="SUSPEND"||i.game.status=="SUSPEND"?"suspended":i.selectedCell==i.winnerMarketArray.runners[0].selectionId?"selected":""),s(2),p(i.marketArray[0]==null?null:i.marketArray[0].runnersName[t==null?null:t.selectionId])}}function U(a,e){if(a&1&&(n(0,"div",5)(1,"div",6)(2,"b"),d(3),o()(),n(4,"div",7),h(5,T,4,2,"ng-container",8),o(),n(6,"div",9),d(7," R:"),n(8,"span",10),d(9),y(10,"shortNumber"),y(11,"shortNumber"),o()()()),a&2){let t=m();s(3),p(t.winnerMarketArray==null||t.winnerMarketArray.runners[0]==null||t.winnerMarketArray.runners[0].price.back[0]==null?null:t.winnerMarketArray.runners[0].price.back[0].price),s(2),c("ngForOf",t.modifiedItemsWinner)("ngForTrackBy",t.trackByFn),s(4),v("",g(10,5,t.winnerMarketArray==null?null:t.winnerMarketArray.min),"-",g(11,7,t.winnerMarketArray==null?null:t.winnerMarketArray.max),"")}}function L(a,e){if(a&1&&(n(0,"div",15)(1,"span",12),d(2),o(),n(3,"span",16),d(4),o()()),a&2){let t=e.$implicit,i=e.index,r=m(2);c("ngClass",r.winnerMarketArray.runners[0].status=="SUSPEND"||r.game.status=="SUSPEND"?"suspended":r.selectedCell==r.winnerMarketArray.runners[0].selectionId?"selected":""),s(2),p(r.marketArray[1]==null?null:r.marketArray[1].runnersName[t==null?null:t.selectionId]),s(2),A(" ",i===0?"1|2|3|4|5":"6|7|8|9|0"," ")}}function Y(a,e){if(a&1&&(n(0,"div",15)(1,"span",12),d(2),o(),n(3,"span",16),d(4),o()()),a&2){let t=e.$implicit,i=e.index,r=m(2);c("ngClass",r.winnerMarketArray.runners[0].status=="SUSPEND"||r.game.status=="SUSPEND"?"suspended":r.selectedCell==r.winnerMarketArray.runners[0].selectionId?"selected":""),s(2),p(r.marketArray[2]==null?null:r.marketArray[2].runnersName[t==null?null:t.selectionId]),s(2),A(" ",i===0?"1|3|5|7|9":"2|4|6|8|0"," ")}}function $(a,e){if(a&1&&(n(0,"div",13)(1,"div",6)(2,"b"),d(3),o()(),n(4,"div",7),h(5,L,5,3,"div",14),o(),n(6,"div",7),h(7,Y,5,3,"div",14),o(),n(8,"div",9),d(9," R:"),n(10,"span",10),d(11),y(12,"shortNumber"),y(13,"shortNumber"),o()()()),a&2){let t=m();s(3),p(t.marketArray[1]==null||t.marketArray[1].runners[0]==null||t.marketArray[1].runners[0].price.back[0]==null?null:t.marketArray[1].runners[0].price.back[0].price),s(2),c("ngForOf",t.marketArray[1].runners),s(2),c("ngForOf",t.marketArray[2].runners),s(4),v("",g(12,5,t.marketArray[1]==null?null:t.marketArray[1].min),"-",g(13,7,t.marketArray[1]==null?null:t.marketArray[1].max),"")}}var F=class a{constructor(e,t,i,r){this.route=e;this.backendService=t;this.encyDecy=i;this.toaster=r;this.eventid=this.route.snapshot.params.id,this._roomId="",this.message.id=this.eventid}subscription;subscription2;message={type:"1",id:""};_roomId;game;timer;theme;counter=0;loader;eventid;betType;marketId;Box0Size;userCount;eventName;split_arr;marketArray;BoxlineSize;changeValue;gameroundId;betplaceObj;RoundWinner;playerACards;playerBCards;selectedCell;resultcounter=0;casinoPl=[];oddEvenBoxSize;isValueBetsSlip=0;getRoundId="";runnersName={};isBetsSlipOpened="";Boxline1="0%";Boxline2="0%";evenBox="0%";betSlip="game";oddBox="0%";totalMatchedBets;winnerMarketArray;betSelectedPlayer;modifiedItemsWinner=[];currentRunnerPrice;Box=["0%","0%","0%","0%","0%","0%","0%","0%","0%","0%"];ngOnInit(){this.encyDecy.generateEncryptionKey("",this.message),this.subscription=this.encyDecy.getMarketData().subscribe((e=[])=>{if(e){this.getRoundId=localStorage.getItem("roundID");let t=JSON.parse(e);if(Array.isArray(t.data)?(t.type=="1"&&(this.marketArray=t.data[0]?.marketArr,this.game=t.data[0],this.game=this.marketArray?this.marketArray:t.data[0]?.marketArr,this.eventName=t.data[0].eventName,this.userCount=t?.user_count,this.backendService.setUserCount(this.userCount),this.winnerMarketArray=this.game?.marketArr?this.game?.marketArr[0]:"",this.Box0Size=this.marketArray[0].runners[0].price.back[0].size,this.BoxlineSize=this.marketArray[1].runners[0].price.back[0].size,this.oddEvenBoxSize=this.marketArray[2].runners[0].price.back[0].size),this.handleEventResponse(t,0)):this.handleEventResponse(t,0),this.game){this.winnerMarketArray=this.game?.marketArr?this.game?.marketArr[0]:"",this.marketArray=this.game.marketArr,this.gameroundId=this.game.roundId,this.game.eventName=this.eventName?this.eventName:this.game.eventName,this.backendService.updateRoundId(this.game),(this.getRoundId!=this.game.roundId||this.getRoundId=="")&&(localStorage.setItem("roundID",this.game.roundId),this.casinoPl=[],this.getResults(),this.selectedCell="",this.betSelectedPlayer="",this.Box=["0%","0%","0%","0%","0%","0%","0%","0%","0%","0%"],this.Boxline1="0%",this.Boxline2="0%",this.evenBox="0%",this.oddBox="0%"),this.playerACards=this.game?.cardsArr?.PLAYER_A,this.playerBCards=this.game?.cardsArr?.PLAYER_B,this.winnerMarketArray=this.game.marketArr?this.game.marketArr[0]:"",this.modifiedItemsWinner=[...this.winnerMarketArray?.runners];let i=this.modifiedItemsWinner.shift();this.modifiedItemsWinner.push(i),this.runnersName=this.winnerMarketArray.runnersName}t.type=="3"&&(this.userCount=t?.user_count,this.backendService.setUserCount(this.userCount))}}),this.getResults(),this.getAllMarketProfitLoss()}handleEventResponse(e,t){if(Array.isArray(e))e.forEach(i=>{this.marketObjManager(i)});else{let i=e;this.marketObjManager(i);return}}marketObjManager(e){if(e&&e.type=="1")if("data"in e&&this.counter==0&&e.data.marketArr&&e.data._id)this.marketArray=e.data.marketArr,this.game=this.marketArray?this.marketArray:e.data,this.game=e.data,this.eventName=e.data.eventName,this.counter=1,this.Box0Size=this.marketArray[0].runners[0].price.back[0].size,this.BoxlineSize=this.marketArray[1].runners[0].price.back[0].size,this.oddEvenBoxSize=this.marketArray[2].runners[0].price.back[0].size;else{if("marketArr"in e?.data&&Array.isArray(e.data.marketArr)&&(this.game.marketArr=e?.data?.marketArr),"cardsArr"in e?.data&&(Array.isArray(e.data.cardsArr)||(this.game.cardsArr=e?.data?.cardsArr)),"roundId"in e&&(this.game.roundId=e?.roundId),"roundId"in e.data&&(this.game.roundId=e?.data?.roundId),"status"in e?.data&&(this.game.status=e?.data?.status),"resultsArr"in e?.data){this.casinoPl&&this.casinoPl[this.winnerMarketArray?.marketId]&&(this.casinoPl[this.winnerMarketArray?.marketId][this.winnerMarketArray.runners[0].selectionId]>0&&(this.betSelectedPlayer=this.winnerMarketArray.runners[0].selectionId),this.casinoPl[this.winnerMarketArray?.marketId][this.winnerMarketArray.runners[1].selectionId]>0&&(this.betSelectedPlayer=this.winnerMarketArray.runners[1].selectionId));for(let i in e?.data?.resultsArr[0]?.runners)e.data?.resultsArr[0]?.runners[i]=="WINNER"&&(this.RoundWinner=e?.data?.resultsArr[0]?.runnersName[i],this.backendService.setResultData(this.RoundWinner)),i==this.betSelectedPlayer&&e.data?.resultsArr[0]?.runners[i]=="WINNER"&&setTimeout(()=>{this.backendService.setResultSparkData(!0)},1e3);setTimeout(()=>{this.RoundWinner=null,this.backendService.setResultData(this.RoundWinner)},5e3)}var t=Object.keys(e?.data)[0];if(t.includes(".")){this.split_arr=t.split("."),Object.entries(e.data).forEach(([,l])=>this.changeValue=l);let i=parseInt(this.split_arr[1]),r=this.split_arr[3],f=this.split_arr[6];if(this.split_arr[7]=="size"){if(i==0){let l=this.changeValue/this.Box0Size*100;r==0?this.Box[9]=-1*(l-100)+"%":this.Box[r-1]=-1*(l-100)+"%"}if(i==1){let l=this.changeValue/this.BoxlineSize*100;r==0?this.Boxline1=-1*(l-100)+"%":this.Boxline2=-1*(l-100)+"%"}if(i==2){let l=this.changeValue/this.oddEvenBoxSize*100;r==0?this.oddBox=-1*(l-100)+"%":this.evenBox=-1*(l-100)+"%"}this.marketArray[i].runners[r].price.back[f].size=this.changeValue}this.split_arr[7]=="price"&&(this.marketArray[i].runners[r].price.back[f].price=this.changeValue)}}e&&e.type=="3"&&(this.userCount=e?.user_count,this.backendService.setUserCount(this.userCount))}intoNumber(e){return e.replace("%",""),parseFloat(e).toFixed(1)}getEventOdds(){this.backendService.getCasinoEventOdds(this.eventid).subscribe(e=>{e.meta.status_code==200?(this.game=e?.data,this.marketArray=this.game?.marketArr,this.playerACards=this.game?.cardsArr?.PLAYER_A,this.playerBCards=this.game?.cardsArr?.PLAYER_B,this.winnerMarketArray=this.game?.marketArr?this.game?.marketArr[0]:"",this.runnersName=this.winnerMarketArray.runnersName):this.toaster.error(e.meta.message,"",{positionClass:"toast-top-center"})})}trackByFn(e,t){return e}ngAfterViewInit(){}getMatchedBets(e){this.totalMatchedBets=e}getMatchedBetsActive(e){this.betSlip=e}openBetslip(e,t,i,r,f,l,k,V){k!="SUSPEND"&&(this.isBetsSlipOpened=t,this.marketId=e,this.selectedCell=t,this.betType=i,this.isValueBetsSlip=0,this.betplaceObj={marketId:e,selectionId:t,betType:i,price:r,eventId:this.eventid,roomId:this._roomId,minValue:f,maxValue:l,marketName:V,status:k})}ChangeValueBetSlip(e){this.isValueBetsSlip=e}getAllMarketProfitLoss(){this.selectedCell="",this.isValueBetsSlip=0,this.backendService.getCasinoPLURL(this.eventid).subscribe(e=>{e.meta.status==!0&&(this.casinoPl=e.pl)})}getResults(){this.backendService.getAllRecordsByPost(N.getCasinoResultURL,{eventId:this.eventid}).pipe(w()).subscribe(e=>{this.backendService.updateResultstream(e.data)},e=>{let t=e})}getValueBetSlip(e){this.isValueBetsSlip=e.stake,this.currentRunnerPrice=e.price}ngOnDestroy(){let e={type:"2",id:""};this.encyDecy.sendMessageToSocket(e),this.subscription&&this.subscription.unsubscribe(),this.subscription2&&this.subscription2.unsubscribe()}static \u0275fac=function(t){return new(t||a)(u(E),u(R),u(W),u(O))};static \u0275cmp=S({type:a,selectors:[["app-instand-worli"]],decls:8,vars:2,consts:[[1,"casino-detail"],[1,"worlibox"],["class","worli-left",4,"ngIf"],["class","worli-right",4,"ngIf"],[1,"showInMobile"],[1,"worli-left"],[1,"worli-box-title"],[1,"worli-box-row"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"casino-min-max","mt-1"],[1,"small-txt"],[1,"worli-odd-box","back","mt-1","position-relative",3,"ngClass"],[1,"worli-odd"],[1,"worli-right"],["class","worli-odd-box back position-relative mt",3,"ngClass",4,"ngFor","ngForOf"],[1,"worli-odd-box","back","position-relative","mt",3,"ngClass"],[1,"d-block","noto"]],template:function(t,i){t&1&&(n(0,"div"),x(1,"app-video-player"),o(),n(2,"div",0)(3,"div",1),h(4,U,12,9,"div",2)(5,$,14,9,"div",3),o(),n(6,"div",4),x(7,"app-resultbar"),o()()),t&2&&(s(4),c("ngIf",i.winnerMarketArray),s(),c("ngIf",i.marketArray))},dependencies:[D,P,C,_,B,M,z],styles:[".casino-detail[_ngcontent-%COMP%]{padding:10px 10px 40px;background-color:#f8f8fb;border-radius:0 0 8px 8px;box-shadow:0 2px 6px #bcbaba}.worlibox[_ngcontent-%COMP%]{display:flex;margin-top:5px;flex-wrap:wrap;position:relative;width:100%}.worli-left[_ngcontent-%COMP%]{width:60%;display:flex;flex-wrap:wrap}.worli-right[_ngcontent-%COMP%]{width:40%;display:flex;flex-wrap:wrap}.worli-box-title[_ngcontent-%COMP%]{width:100%;text-align:center;margin:5px 0;min-height:18px}.worli-box-row[_ngcontent-%COMP%]{width:100%;display:flex;flex-wrap:wrap;margin-bottom:2px;font-family:CasinoFont}.worli-odd-box[_ngcontent-%COMP%]{width:calc(20% - 2px);margin-right:2px;text-align:center;height:70px;display:flex;flex-wrap:wrap;justify-content:center;align-items:center;flex-direction:column;cursor:pointer;border-radius:4px}.noto[_ngcontent-%COMP%]{font-family:Roboto Condensed,sans-serif;font-size:12px}.back[_ngcontent-%COMP%]{background-color:#72bbef17;border:2px solid #72bbef}.mt[_ngcontent-%COMP%]{margin-top:2px}.casino-min-max[_ngcontent-%COMP%]{font-size:14px;color:#000;font-weight:400;display:flex;flex-wrap:wrap;width:100%;justify-content:flex-end}.worli-odd[_ngcontent-%COMP%]{font-size:20px;height:40px;width:100%;display:flex;justify-content:center;align-items:center}.worli-right[_ngcontent-%COMP%]   .worli-odd-box[_ngcontent-%COMP%]{width:calc(50% - 2px);margin-right:2px}.suspended[_ngcontent-%COMP%]{cursor:not-allowed}@media screen and (max-width: 350px){.worli-odd[_ngcontent-%COMP%]{font-size:18px;white-space:nowrap}}@media screen and (min-width: 768px){.worli-box-title[_ngcontent-%COMP%]{min-height:24px}.worli-odd[_ngcontent-%COMP%]{font-size:40px}.noto[_ngcontent-%COMP%]{font-size:16px}}"]})};export{F as InstandWorliComponent};
