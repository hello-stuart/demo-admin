import{a as I}from"./chunk-DW4XPVKQ.js";import{a as R}from"./chunk-AWYQW5EK.js";import{c as C,d as M}from"./chunk-A5YAUSYP.js";import"./chunk-5UJXZMZS.js";import"./chunk-ACVM4ET5.js";import"./chunk-QZIUMNBJ.js";import{m as b,q as S}from"./chunk-6542H3SY.js";import{f as k}from"./chunk-F4ECYANF.js";import{Db as p,Nb as n,O as g,Ob as i,Pb as m,Sc as f,_c as v,bb as a,cb as l,dc as s,ec as u,fc as h,hd as w,mb as A}from"./chunk-CKWEI2SK.js";import"./chunk-ZR4K4ZIC.js";var N=class y{constructor(e,r,t,o,c){this.route=e;this.toaster=r;this.mainService=t;this.backendService=o;this.encyDecy=c;this.eventid=this.route.snapshot.params.id,localStorage.setItem("eventId",this.eventid),this.message.id=this.eventid}subscription;subscription2;message={type:"1",id:""};firstBoxWidth="0%";secndBoxWidth="0%";eventid;myVideo=null;placedbet=!0;runnersName={};marketArray;rulesBox;selectedResult;resultArray;game;timer;winnerMarketArray;playerACards;playerBCards;gameroundId;_roomId;marketId;split_arr;changeValue;eventName;counter=0;selectedCell;resultcounter=0;RoundWinner;betStakes;sizeRunner1;sizeRunner2;getRoundId="";winningAmount;currentRunnerPrice;ngOnInit(){this.encyDecy.generateEncryptionKey("",this.message),this.subscription=this.encyDecy.getMarketData().subscribe((e=[])=>{if(e){this.getRoundId=localStorage.getItem("roundID");let r=JSON.parse(e);Array.isArray(r.data)?(r.type=="1"&&(this.marketArray=r.data[0].marketArr,this.game=r.data[0],this.game.marketArr=this.marketArray?this.marketArray:r.data[0].marketArr,this.eventName=r.data[0].eventName,this.sizeRunner1=this.marketArray[0].runners[0].price.back[0].size,this.sizeRunner2=this.marketArray[0].runners[1].price.back[0].size,this.winnerMarketArray=this.game?.marketArr?this.game?.marketArr[0]:""),this.handleEventResponse(r,0)):this.handleEventResponse(r,0),this.game&&(this.game.eventName=this.eventName?this.eventName:this.game.eventName,this.backendService.updateRoundId(this.game),(this.getRoundId!=this.game.roundId||this.getRoundId=="")&&(localStorage.setItem("roundID",this.game.roundId),this.getResults(),this.selectedCell="",this.secndBoxWidth="0%",this.firstBoxWidth="0%"),this.playerACards=this.game?.cardsArr?.PLAYER_A,this.playerBCards=this.game?.cardsArr?.PLAYER_B,this.winnerMarketArray=this.game.marketArr?this.game.marketArr[0]:"",this.runnersName=this.winnerMarketArray.runnersName)}}),this.getResults()}handleEventResponse(e,r){if(Array.isArray(e))e.forEach(t=>{this.marketObjManager(t)});else{let t=e;this.marketObjManager(t);return}}marketObjManager(e){if(e&&e.type=="1")if("data"in e&&this.counter==0&&e.data.marketArr&&e.data._id)this.marketArray=e.data.marketArr,this.sizeRunner1=this.marketArray[0].runners[0].price.back[0].size,this.sizeRunner2=this.marketArray[0].runners[1].price.back[0].size,this.game=this.marketArray?this.marketArray:e.data,this.game=e.data,this.eventName=e.data.eventName,this.counter=1;else{if("marketArr"in e?.data&&Array.isArray(e.data.marketArr)&&(this.game.marketArr=e.data.marketArr),"cardsArr"in e?.data&&(Array.isArray(e.data.cardsArr)||(this.game.cardsArr=e.data.cardsArr)),"roundId"in e&&(this.game.roundId=e?.roundId),"roundId"in e.data&&(this.game.roundId=e?.data?.roundId),"status"in e?.data&&(this.game.status=e.data.status),"resultsArr"in e?.data){for(let t in e.data.resultsArr[0].runners)e.data?.resultsArr[0]?.runners[t]=="WINNER"&&(this.RoundWinner=e?.data?.resultsArr[0]?.runnersName[t],this.backendService.setResultData(this.RoundWinner)),e.data?.resultsArr[0]?.runners[t]=="WINNER"&&setTimeout(()=>{this.backendService.setResultWinningAmount(this.winningAmount),this.backendService.setResultSparkData(!0)},1e3);setTimeout(()=>{this.RoundWinner=null,this.winningAmount=null,this.backendService.setResultData(this.RoundWinner),this.backendService.setResultWinningAmount(this.winningAmount)},5e3)}var r=Object.keys(e.data)[0];if(r.includes(".")){this.split_arr=r.split("."),Object.entries(e.data).forEach(([,d])=>this.changeValue=d);let t=parseInt(this.split_arr[1]),o=this.split_arr[3],c=this.split_arr[6];if(this.split_arr[7]=="size"){if(o==0){let d=this.changeValue/this.sizeRunner1*100;this.firstBoxWidth=-1*(d-100)+"%"}if(o==1){let d=this.changeValue/this.sizeRunner2*100;this.secndBoxWidth=-1*(d-100)+"%"}this.marketArray[t].runners[o].price.back[c].size=this.changeValue}this.split_arr[7]=="price"&&(this.marketArray[t].runners[o].price.back[c].price=this.changeValue)}}}intoNumber(e){return e.replace("%",""),parseFloat(e).toFixed(1)}getEventOdds(){this.backendService.getCasinoEventOdds(this.eventid).subscribe(e=>{e.meta.status_code==200?(this.game=e?.data,this.marketArray=this.game?.marketArr,this.playerACards=this.game?.cardsArr?.PLAYER_A,this.playerBCards=this.game?.cardsArr?.PLAYER_B,this.winnerMarketArray=this.game?.marketArr?this.game.marketArr[0]:"",this.runnersName=this.winnerMarketArray.runnersName):this.toaster.error(e.meta.message,"",{positionClass:"toast-top-right"})})}getResults(){this.backendService.getAllRecordsByPost(w.getCasinoResultURL,{eventId:this.eventid}).pipe(g()).subscribe(e=>{this.backendService.updateResultstream(e.data)},e=>{let r=e})}ngOnDestroy(){let e={type:"2",id:""};this.encyDecy.sendMessageToSocket(e),this.subscription&&this.subscription.unsubscribe(),this.subscription2&&this.subscription2.unsubscribe()}capitalize(e){return e?e.replace(/\w\S*/g,r=>r.charAt(0).toUpperCase()+r.substr(1).toLowerCase()):""}static \u0275fac=function(r){return new(r||y)(l(k),l(b),l(I),l(S),l(M))};static \u0275cmp=A({type:y,selectors:[["app-muflis-teenpatti"]],decls:41,vars:8,consts:[[1,"videoPlayer"],[1,"casino-detail"],[1,"muf-teen-container"],[1,"muf-teen-left"],[1,"player-title-row"],[1,"player-name"],[1,"player-a-text","text-start"],[1,"row"],[1,"col-12","col-md-4"],[1,"casino-box-row"],[1,"casino-status","text-center"],[1,"casino-bet-box"],[1,"casino-box-item","back",2,"position","relative",3,"ngClass"],[1,"casino-odd-value"],[1,"bet-size-value"],[1,"muf-teen-center"],[1,"muf-teen-right"],[1,"player-b-text","text-start"],[1,"showInMobile"]],template:function(r,t){r&1&&(n(0,"div",0),m(1,"app-video-player"),i(),n(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6),s(8),i()()(),n(9,"div",7)(10,"div",8)(11,"div",9)(12,"div",10)(13,"b"),s(14),i()(),n(15,"div",11)(16,"div",12)(17,"span",13),s(18),i(),n(19,"span",14),s(20,"0"),i()()()()()()(),m(21,"div",15),n(22,"div",16)(23,"div",4)(24,"div",5)(25,"div",17),s(26),i()()(),n(27,"div",7)(28,"div",8)(29,"div",9)(30,"div",10)(31,"b"),s(32),i()(),n(33,"div",11)(34,"div",12)(35,"span",13),s(36),i(),n(37,"span",14),s(38,"0"),i()()()()()()()(),n(39,"div",18),m(40,"app-resultbar"),i()()),r&2&&(a(8),h(" ",t.capitalize(t.winnerMarketArray==null?null:t.winnerMarketArray.runnersName[t.winnerMarketArray==null||t.winnerMarketArray.runners[0]==null?null:t.winnerMarketArray.runners[0].selectionId]),""),a(6),u(t.winnerMarketArray==null?null:t.winnerMarketArray.marketName),a(2),p("ngClass",(t.winnerMarketArray==null||t.winnerMarketArray.runners[0]==null?null:t.winnerMarketArray.runners[0].status)=="SUSPEND"||(t.game==null?null:t.game.status)=="SUSPEND"?"suspended":t.selectedCell==(t.winnerMarketArray==null||t.winnerMarketArray.runners[0]==null?null:t.winnerMarketArray.runners[0].selectionId)?"selected":""),a(2),u(t.winnerMarketArray==null||t.winnerMarketArray.runners[0].price==null||t.winnerMarketArray.runners[0].price.back[0]==null?null:t.winnerMarketArray.runners[0].price.back[0].price),a(8),h(" ",t.capitalize(t.winnerMarketArray==null?null:t.winnerMarketArray.runnersName[t.winnerMarketArray==null||t.winnerMarketArray.runners[1]==null?null:t.winnerMarketArray.runners[1].selectionId]),""),a(6),u(t.winnerMarketArray==null?null:t.winnerMarketArray.marketName),a(2),p("ngClass",(t.winnerMarketArray==null||t.winnerMarketArray.runners[0]==null?null:t.winnerMarketArray.runners[0].status)=="SUSPEND"||(t.game==null?null:t.game.status)=="SUSPEND"?"suspended":t.selectedCell==(t.winnerMarketArray==null||t.winnerMarketArray.runners[0]==null?null:t.winnerMarketArray.runners[0].selectionId)?"selected":""),a(2),u(t.winnerMarketArray==null||t.winnerMarketArray.runners[0]==null||t.winnerMarketArray.runners[0].price.back[0]==null?null:t.winnerMarketArray.runners[0].price.back[0].price))},dependencies:[v,f,R,C],styles:[".videoPlayer[_ngcontent-%COMP%]{height:345px}.casino-detail[_ngcontent-%COMP%]{padding:10px 10px 40px;background-color:#f8f8fb;border-radius:0 0 8px 8px;box-shadow:0 2px 6px #e2e2e2}.muf-teen-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-between;width:100%}.muf-teen-left[_ngcontent-%COMP%], .muf-teen-right[_ngcontent-%COMP%]{width:49%}.player-title-row[_ngcontent-%COMP%], .casino-box-row[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;padding:2px 0;align-items:center;position:relative}.player-name[_ngcontent-%COMP%]{background-color:transparent;padding:0;width:100%}.player-a-text[_ngcontent-%COMP%]{color:#fc4242!important;font-size:14px;font-family:Noto Sans}.player-b-text[_ngcontent-%COMP%]{color:#ef910f!important;font-size:14px;font-family:Noto Sans}.casino-status[_ngcontent-%COMP%]{width:100%;background-color:transparent;padding:4px;font-size:14px;color:#000;font-family:Noto Sans}.casino-bet-box[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-wrap:wrap;width:100%}.casino-box-item[_ngcontent-%COMP%]{width:100%;height:40px;margin-right:4px;border-radius:4px;display:flex;justify-content:center;align-items:center;flex-direction:column;cursor:pointer;text-align:center}.casino-box-item.back[_ngcontent-%COMP%]{background-color:#72bbef17;border:2px solid #72bbef}.casino-odd-value[_ngcontent-%COMP%]{font-weight:700;font-size:12px;height:16px;line-height:16px;margin-bottom:2px;width:100%;color:#333}.bet-size-value[_ngcontent-%COMP%]{font-size:12px;line-height:1}.muf-teen-center[_ngcontent-%COMP%]{width:2px;background-color:gray}"]})};export{N as MuflisTeenpattiComponent};
