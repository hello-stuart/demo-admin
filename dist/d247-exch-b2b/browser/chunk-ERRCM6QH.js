import{a as B}from"./chunk-AWYQW5EK.js";import{c as M,d as _}from"./chunk-A5YAUSYP.js";import"./chunk-5UJXZMZS.js";import"./chunk-ACVM4ET5.js";import"./chunk-QZIUMNBJ.js";import{m as C,q as I}from"./chunk-6542H3SY.js";import{f as b}from"./chunk-F4ECYANF.js";import{Db as d,Nb as t,O as k,Ob as a,Pb as h,Sc as x,Uc as v,Wb as p,_c as w,bb as u,cb as m,dc as s,ec as c,hd as S,mb as g,sb as f}from"./chunk-CKWEI2SK.js";import"./chunk-ZR4K4ZIC.js";function N(i,r){if(i&1&&(t(0,"div",7)(1,"div",8)(2,"b"),s(3),a(),t(4,"span",9),s(5,"0"),a()(),t(6,"div",10)(7,"span",9)(8,"b"),s(9),a()()()()),i&2){let e=p();d("ngClass",(e.winnerMarketArray==null||e.winnerMarketArray.runners==null||e.winnerMarketArray.runners[0]==null?null:e.winnerMarketArray.runners[0].status)==="SUSPEND"||(e.game==null?null:e.game.status)==="SUSPEND"?"suspended":e.selectedCell===(e.winnerMarketArray==null||e.winnerMarketArray.runners==null||e.winnerMarketArray.runners[0]==null?null:e.winnerMarketArray.runners[0].selectionId)?"selected":""),u(3),c(e.capitalize(e.marketArray==null||e.marketArray[0]==null?null:e.marketArray[0].runnersName[e.marketArray==null||e.marketArray[0]==null||e.marketArray[0].runners==null||e.marketArray[0].runners[0]==null?null:e.marketArray[0].runners[0].selectionId])),u(6),c(e.marketArray==null||e.marketArray[0]==null||e.marketArray[0].runners==null||e.marketArray[0].runners[0]==null||e.marketArray[0].runners[0].price==null||e.marketArray[0].runners[0].price.back==null||e.marketArray[0].runners[0].price.back[0]==null?null:e.marketArray[0].runners[0].price.back[0].price)}}function O(i,r){if(i&1&&(t(0,"div",11)(1,"div",12)(2,"b"),s(3),a()(),t(4,"div",13)(5,"span",9)(6,"b"),s(7),a()(),t(8,"span",9),s(9,"0"),a()()()),i&2){let e=p();d("ngClass",(e.winnerMarketArray==null||e.winnerMarketArray.runners==null||e.winnerMarketArray.runners[0]==null?null:e.winnerMarketArray.runners[0].status)==="SUSPEND"||(e.game==null?null:e.game.status)==="SUSPEND"?"suspend":e.selectedCell===(e.winnerMarketArray==null||e.winnerMarketArray.runners==null||e.winnerMarketArray.runners[0]==null?null:e.winnerMarketArray.runners[0].selectionId)?"selected":""),u(3),c(e.capitalize(e.marketArray==null||e.marketArray[1]==null?null:e.marketArray[1].runnersName[e.marketArray==null||e.marketArray[1]==null||e.marketArray[1].runners==null||e.marketArray[1].runners[0]==null?null:e.marketArray[1].runners[0].selectionId])),u(4),c(e.marketArray==null||e.marketArray[1]==null||e.marketArray[1].runners==null||e.marketArray[1].runners[0]==null||e.marketArray[1].runners[0].price==null||e.marketArray[1].runners[0].price.back==null||e.marketArray[1].runners[0].price.back[0]==null?null:e.marketArray[1].runners[0].price.back[0].price)}}function R(i,r){if(i&1&&(t(0,"div",14)(1,"div",8)(2,"b"),s(3),a(),t(4,"span",9),s(5,"0"),a()(),t(6,"div",10)(7,"span",9)(8,"b"),s(9,"2"),a()()()()),i&2){let e=p();d("ngClass",(e.winnerMarketArray==null||e.winnerMarketArray.runners==null||e.winnerMarketArray.runners[0]==null?null:e.winnerMarketArray.runners[0].status)==="SUSPEND"||(e.game==null?null:e.game.status)==="SUSPEND"?"suspended":e.selectedCell===(e.winnerMarketArray==null||e.winnerMarketArray.runners==null||e.winnerMarketArray.runners[0]==null?null:e.winnerMarketArray.runners[0].selectionId)?"selected":""),u(3),c(e.capitalize(e.marketArray==null||e.marketArray[0]==null?null:e.marketArray[0].runnersName[e.marketArray==null||e.marketArray[0]==null||e.marketArray[0].runners==null||e.marketArray[0].runners[1]==null?null:e.marketArray[0].runners[1].selectionId]))}}function D(i,r){if(i&1&&(t(0,"div",15)(1,"div",16)(2,"b"),s(3),a()(),t(4,"div",17)(5,"span",9)(6,"b"),s(7),a()(),t(8,"span",9),s(9,"0"),a()()()),i&2){let e=p();d("ngClass",(e.winnerMarketArray==null||e.winnerMarketArray.runners==null||e.winnerMarketArray.runners[0]==null?null:e.winnerMarketArray.runners[0].status)==="SUSPEND"||(e.game==null?null:e.game.status)==="SUSPEND"?"suspended":e.selectedCell===(e.winnerMarketArray==null||e.winnerMarketArray.runners==null||e.winnerMarketArray.runners[0]==null?null:e.winnerMarketArray.runners[0].selectionId)?"selected":""),u(3),c(e.capitalize(e.marketArray==null||e.marketArray[2]==null?null:e.marketArray[2].runnersName[e.marketArray==null||e.marketArray[2]==null||e.marketArray[2].runners==null||e.marketArray[2].runners[0]==null?null:e.marketArray[2].runners[0].selectionId])),u(4),c(e.marketArray==null||e.marketArray[2]==null||e.marketArray[2].runners==null||e.marketArray[2].runners[0]==null||e.marketArray[2].runners[0].price==null||e.marketArray[2].runners[0].price.back==null||e.marketArray[2].runners[0].price.back[0]==null?null:e.marketArray[2].runners[0].price.back[0].price)}}var P=class i{constructor(r,e,n,o){this.route=r;this.backendService=e;this.encyDecy=n;this.toaster=o;this.eventid=this.route.snapshot.params.id,this._roomId="",this.message.id=this.eventid}subscription;subscription2;message={type:"1",id:""};_roomId;game;timer;theme;counter=0;loader;eventid;betType;marketId;Box0Size;userCount;eventName;split_arr;marketArray;BoxlineSize;changeValue;gameroundId;betplaceObj;RoundWinner;playerACards;playerBCards;selectedCell;resultcounter=0;casinoPl=[];oddEvenBoxSize;isValueBetsSlip=0;getRoundId="";runnersName={};isBetsSlipOpened="";Boxline1="0%";Boxline2="0%";evenBox="0%";betSlip="game";oddBox="0%";totalMatchedBets;winnerMarketArray;betSelectedPlayer;modifiedItemsWinner=[];currentRunnerPrice;Box=["0%","0%","0%","0%","0%","0%","0%","0%","0%","0%"];ngOnInit(){this.encyDecy.generateEncryptionKey("",this.message),this.subscription=this.encyDecy.getMarketData().subscribe((r=[])=>{if(r){this.getRoundId=localStorage.getItem("roundID");let e=JSON.parse(r);if(Array.isArray(e.data)?(e.type=="1"&&(this.marketArray=e.data[0]?.marketArr,this.game=e.data[0],this.game=this.marketArray?this.marketArray:e.data[0]?.marketArr,this.eventName=e.data[0]?.eventName,this.userCount=e?.user_count,this.backendService.setUserCount(this.userCount),this.winnerMarketArray=this.game?.marketArr?this.game?.marketArr[0]:"",this.Box0Size=this.marketArray[0].runners[0].price.back[0].size,this.BoxlineSize=this.marketArray[1].runners[0].price.back[0].size,this.oddEvenBoxSize=this.marketArray[2].runners[0].price.back[0].size),this.handleEventResponse(e,0)):this.handleEventResponse(e,0),this.game){this.winnerMarketArray=this.game?.marketArr?this.game?.marketArr[0]:"",this.marketArray=this.game.marketArr,this.gameroundId=this.game.roundId,this.game.eventName=this.eventName?this.eventName:this.game.eventName,this.backendService.updateRoundId(this.game),(this.getRoundId!=this.game.roundId||this.getRoundId=="")&&(localStorage.setItem("roundID",this.game.roundId),this.casinoPl=[],this.getResults(),this.selectedCell="",this.betSelectedPlayer="",this.Box=["0%","0%","0%","0%","0%","0%","0%","0%","0%","0%"],this.Boxline1="0%",this.Boxline2="0%",this.evenBox="0%",this.oddBox="0%"),this.playerACards=this.game?.cardsArr?.PLAYER_A,this.playerBCards=this.game?.cardsArr?.PLAYER_B,this.winnerMarketArray=this.game.marketArr?this.game.marketArr[0]:"",this.modifiedItemsWinner=[...this.winnerMarketArray?.runners];let n=this.modifiedItemsWinner.shift();this.modifiedItemsWinner.push(n),this.runnersName=this.winnerMarketArray.runnersName}e.type=="3"&&(this.userCount=e?.user_count,this.backendService.setUserCount(this.userCount))}}),this.getResults(),this.getAllMarketProfitLoss()}handleEventResponse(r,e){if(Array.isArray(r))r.forEach(n=>{this.marketObjManager(n)});else{let n=r;this.marketObjManager(n);return}}marketObjManager(r){if(r&&r.type=="1")if("data"in r&&this.counter==0&&r.data.marketArr&&r.data._id)this.marketArray=r.data.marketArr,this.game=this.marketArray?this.marketArray:r.data,this.game=r.data,this.eventName=r.data.eventName,this.counter=1,this.Box0Size=this.marketArray[0].runners[0].price.back[0].size,this.BoxlineSize=this.marketArray[1].runners[0].price.back[0].size,this.oddEvenBoxSize=this.marketArray[2].runners[0].price.back[0].size;else{if("marketArr"in r?.data&&Array.isArray(r.data.marketArr)&&(this.game.marketArr=r?.data?.marketArr),"cardsArr"in r?.data&&(Array.isArray(r.data.cardsArr)||(this.game.cardsArr=r?.data?.cardsArr)),"roundId"in r&&(this.game.roundId=r?.roundId),"roundId"in r.data&&(this.game.roundId=r?.data?.roundId),"status"in r?.data&&(this.game.status=r?.data?.status),"resultsArr"in r?.data){this.casinoPl&&this.casinoPl[this.winnerMarketArray?.marketId]&&(this.casinoPl[this.winnerMarketArray?.marketId][this.winnerMarketArray.runners[0].selectionId]>0&&(this.betSelectedPlayer=this.winnerMarketArray.runners[0].selectionId),this.casinoPl[this.winnerMarketArray?.marketId][this.winnerMarketArray.runners[1].selectionId]>0&&(this.betSelectedPlayer=this.winnerMarketArray.runners[1].selectionId));for(let n in r?.data?.resultsArr[0]?.runners)r.data?.resultsArr[0]?.runners[n]=="WINNER"&&(this.RoundWinner=r?.data?.resultsArr[0]?.runnersName[n],this.backendService.setResultData(this.RoundWinner)),n==this.betSelectedPlayer&&r.data?.resultsArr[0]?.runners[n]=="WINNER"&&setTimeout(()=>{this.backendService.setResultSparkData(!0)},1e3);setTimeout(()=>{this.RoundWinner=null,this.backendService.setResultData(this.RoundWinner)},5e3)}var e=Object.keys(r?.data)[0];if(e.includes(".")){this.split_arr=e.split("."),Object.entries(r.data).forEach(([,l])=>this.changeValue=l);let n=parseInt(this.split_arr[1]),o=this.split_arr[3],y=this.split_arr[6];if(this.split_arr[7]=="size"){if(n==0){let l=this.changeValue/this.Box0Size*100;o==0?this.Box[9]=-1*(l-100)+"%":this.Box[o-1]=-1*(l-100)+"%"}if(n==1){let l=this.changeValue/this.BoxlineSize*100;o==0?this.Boxline1=-1*(l-100)+"%":this.Boxline2=-1*(l-100)+"%"}if(n==2){let l=this.changeValue/this.oddEvenBoxSize*100;o==0?this.oddBox=-1*(l-100)+"%":this.evenBox=-1*(l-100)+"%"}this.marketArray[n].runners[o].price.back[y].size=this.changeValue}this.split_arr[7]=="price"&&(this.marketArray[n].runners[o].price.back[y].price=this.changeValue)}}r&&r.type=="3"&&(this.userCount=r?.user_count,this.backendService.setUserCount(this.userCount))}intoNumber(r){return r.replace("%",""),parseFloat(r).toFixed(1)}getEventOdds(){this.backendService.getCasinoEventOdds(this.eventid).subscribe(r=>{r.meta.status_code==200?(this.game=r?.data,this.marketArray=this.game?.marketArr,this.playerACards=this.game?.cardsArr?.PLAYER_A,this.playerBCards=this.game?.cardsArr?.PLAYER_B,this.winnerMarketArray=this.game?.marketArr?this.game?.marketArr[0]:"",this.runnersName=this.winnerMarketArray.runnersName):this.toaster.error(r.meta.message,"",{positionClass:"toast-top-center"})})}trackByFn(r,e){return r}ngAfterViewInit(){}getMatchedBets(r){this.totalMatchedBets=r}getMatchedBetsActive(r){this.betSlip=r}openBetslip(r,e,n,o,y,l,A,E){A!="SUSPEND"&&(this.isBetsSlipOpened=e,this.marketId=r,this.selectedCell=e,this.betType=n,this.isValueBetsSlip=0,this.betplaceObj={marketId:r,selectionId:e,betType:n,price:o,eventId:this.eventid,roomId:this._roomId,minValue:y,maxValue:l,marketName:E,status:A})}ChangeValueBetSlip(r){this.isValueBetsSlip=r}getAllMarketProfitLoss(){this.selectedCell="",this.isValueBetsSlip=0,this.backendService.getCasinoPLURL(this.eventid).subscribe(r=>{r.meta.status==!0&&(this.casinoPl=r.pl)})}getResults(){this.backendService.getAllRecordsByPost(S.getCasinoResultURL,{eventId:this.eventid}).pipe(k()).subscribe(r=>{this.backendService.updateResultstream(r.data)},r=>{let e=r})}getValueBetSlip(r){this.isValueBetsSlip=r.stake,this.currentRunnerPrice=r.price}ngOnDestroy(){let r={type:"2",id:""};this.encyDecy.sendMessageToSocket(r),this.subscription&&this.subscription.unsubscribe(),this.subscription2&&this.subscription2.unsubscribe()}capitalize(r){return r?r.replace(/\w\S*/g,e=>e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()):""}static \u0275fac=function(e){return new(e||i)(m(b),m(I),m(_),m(C))};static \u0275cmp=g({type:i,selectors:[["app-one-card2020"]],decls:10,vars:4,consts:[[1,"casino-detail"],[1,"game-container"],["class","drogon-box-container","style","position: relative;",3,"ngClass",4,"ngIf"],["class","tie-circle-container",3,"ngClass",4,"ngIf"],["class","tiger-box-container dealer-box","style","position: relative;",3,"ngClass",4,"ngIf"],["class","pair-box-container",3,"ngClass",4,"ngIf"],[1,"showInMobile"],[1,"drogon-box-container",2,"position","relative",3,"ngClass"],[1,"book-details"],[1,"d-block"],[1,"text-center","odds-value"],[1,"tie-circle-container",3,"ngClass"],[1,"text-light"],[1,"text-center","odds-section","text-light"],[1,"tiger-box-container","dealer-box",2,"position","relative",3,"ngClass"],[1,"pair-box-container",3,"ngClass"],[1,"pair-title"],[1,"text-center","odds-section"]],template:function(e,n){e&1&&(t(0,"div"),h(1,"app-video-player"),a(),t(2,"div",0)(3,"div",1),f(4,N,10,3,"div",2)(5,O,10,3,"div",3)(6,R,10,2,"div",4)(7,D,10,3,"div",5),a(),t(8,"div",6),h(9,"app-resultbar"),a()()),e&2&&(u(4),d("ngIf",n.winnerMarketArray==null||n.winnerMarketArray.runners==null?null:n.winnerMarketArray.runners[0]),u(),d("ngIf",n.winnerMarketArray==null||n.winnerMarketArray.runners==null?null:n.winnerMarketArray.runners[0]),u(),d("ngIf",n.winnerMarketArray==null||n.winnerMarketArray.runners==null?null:n.winnerMarketArray.runners[0]),u(),d("ngIf",n.winnerMarketArray==null||n.winnerMarketArray.runners==null?null:n.winnerMarketArray.runners[0]))},dependencies:[w,x,v,B,M],styles:[".casino-detail[_ngcontent-%COMP%]{padding:10px 10px 40px;background-color:#f8f8fb;border-radius:0 0 8px 8px;box-shadow:0 2px 6px #e2e2e2}.game-container[_ngcontent-%COMP%]{width:100%;display:flex;flex-wrap:wrap;align-items:center;justify-content:space-between;padding-top:20px;position:relative}.drogon-box-container[_ngcontent-%COMP%]{width:40%;padding:6px 60px 6px 6px;border:2px solid #fc4242;background-color:#fc42422e;display:flex;flex-wrap:wrap;justify-content:space-between;align-items:center;min-height:60px;cursor:pointer}.book-details[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-between;width:90%;flex-direction:column}.odds-value[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:flex-end;flex-direction:column}.tie-circle-container[_ngcontent-%COMP%]{position:absolute;width:100px;height:100px;border-radius:50%;left:40%;transform:translate(-50%);padding:6px;display:flex;justify-content:space-between;align-items:center;background-color:#03b37f;color:var(--text-white);flex-direction:column;justify-content:center;z-index:10;cursor:pointer}.odds-section[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:flex-end;flex-direction:column}.tiger-box-container[_ngcontent-%COMP%]{width:40%;border:2px solid #fdcf13;background-color:#fdcf132e;display:flex;justify-content:space-between;align-items:center;min-height:60px;padding:6px 6px 6px 60px;cursor:pointer;position:relative}.pair-box-container[_ngcontent-%COMP%]{width:18%;margin-left:2%;background-color:#03b37f33;padding:6px;display:flex;justify-content:space-between;align-items:center;min-height:60px;flex-wrap:wrap;cursor:pointer;border:2px solid #0041a2;position:relative}.pair-title[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-between;width:90%}@media (max-width:767px){.pair-box-container[_ngcontent-%COMP%]{width:100%;margin-left:0;margin-top:10px}.drogon-box-container[_ngcontent-%COMP%]{padding-right:35px;width:50%}.tiger-box-container[_ngcontent-%COMP%]{padding-left:35px;width:50%}.tie-circle-container[_ngcontent-%COMP%]{left:50%;height:70px;width:70px;top:15px}}"]})};export{P as OneCard2020Component};
