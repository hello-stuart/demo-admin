import{Ba as g,_c as I,ba as m,cb as f,ib as u,jb as b,nb as y,ob as T}from"./chunk-CKWEI2SK.js";var P=(()=>{class s{constructor(i,e,r){this.el=i,this.vcr=e,this.renderer=r,this.dtOptions={}}ngOnInit(){this.dtTrigger?this.dtTrigger.subscribe(i=>{this.displayTable(i)}):this.displayTable(null)}ngOnDestroy(){this.dtTrigger&&this.dtTrigger.unsubscribe(),this.dt&&this.dt.destroy(!0)}displayTable(i){i&&(this.dtOptions=i),this.dtInstance=new Promise((e,r)=>{Promise.resolve(this.dtOptions).then(t=>{if(Object.keys(t).length===0&&$("tbody tr",this.el.nativeElement).length===0){r("Both the table and dtOptions cannot be empty");return}t.columns&&t.columns.forEach(n=>{(n.id??"").trim()===""&&(n.id=this.getColumnUniqueId())}),setTimeout(()=>{let n={rowCallback:(o,c,l)=>{if(t.columns){let d=t.columns;this.applyNgPipeTransform(o,d),this.applyNgRefTemplate(o,d,c)}t.rowCallback&&t.rowCallback(o,c,l)}};n=Object.assign({},t,n),this.dt=$(this.el.nativeElement).DataTable(n),e(this.dt)})})})}applyNgPipeTransform(i,e){e.filter(t=>t.ngPipeInstance&&!t.ngTemplateRef).forEach(t=>{let a=t.ngPipeInstance,n=t.ngPipeArgs||[],o=e.filter(h=>h.visible!==!1).findIndex(h=>h.id===t.id),c=i.childNodes.item(o),l=$(c).text(),d=a.transform(l,...n);$(c).text(d)})}applyNgRefTemplate(i,e,r){e.filter(a=>a.ngTemplateRef&&!a.ngPipeInstance).forEach(a=>{let{ref:n,context:o}=a.ngTemplateRef,c=e.filter(p=>p.visible!==!1).findIndex(p=>p.id===a.id),l=i.childNodes.item(c);$(l).html("");let d=Object.assign({},o,o?.userData,{adtData:r}),h=this.vcr.createEmbeddedView(n,d);this.renderer.appendChild(l,h.rootNodes[0])})}getColumnUniqueId(){let i="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let r=0;r<6;r++){let t=Math.floor(Math.random()*e.length);i+=e.charAt(t)}return i.trim()}static{this.\u0275fac=function(e){return new(e||s)(f(g),f(b),f(u))}}static{this.\u0275dir=T({type:s,selectors:[["","datatable",""]],inputs:{dtOptions:"dtOptions",dtTrigger:"dtTrigger"},standalone:!1})}}return s})();var w=(()=>{class s{static{this.\u0275fac=function(e){return new(e||s)}}static{this.\u0275mod=y({type:s})}static{this.\u0275inj=m({imports:[I]})}}return s})();export{P as a,w as b};
