import{a as x}from"./chunk-AWYQW5EK.js";import{c as N,d as z}from"./chunk-A5YAUSYP.js";import"./chunk-5UJXZMZS.js";import"./chunk-ACVM4ET5.js";import"./chunk-QZIUMNBJ.js";import{m as R,q as E}from"./chunk-6542H3SY.js";import{f as I}from"./chunk-F4ECYANF.js";import{$b as _,Db as c,Nb as s,O as v,Ob as o,Pb as p,Qb as u,Rb as y,Sc as S,Tc as P,Uc as w,Wb as m,ac as C,bb as a,bc as M,cb as g,dc as l,ec as h,fc as f,hd as O,mb as A,sb as d}from"./chunk-CKWEI2SK.js";import"./chunk-ZR4K4ZIC.js";function B(r,t){if(r&1&&(s(0,"div",12)(1,"div",13),l(2),o(),s(3,"button",14),p(4,"div",15),s(5,"span",16),l(6),o(),s(7,"span",17),l(8,"0"),o()()()),r&2){let e=m().$implicit,n=m().$implicit,i=m();a(2),h(e.marketName),a(),c("ngClass",n.status=="SUSPEND"||(i.game==null?null:i.game.status)=="SUSPEND"||i.game.length==0?"suspended":""),a(3),h(e.runners[0].price.back[0].price)}}function T(r,t){if(r&1&&(u(0),d(1,B,9,3,"div",11),y()),r&2){let e=t.index;a(),c("ngIf",e!==4)}}function F(r,t){if(r&1&&(s(0,"div",7)(1,"div",8)(2,"div",9),l(3),o()(),s(4,"div",10),d(5,T,2,1,"ng-container",5),o()()),r&2){let e=t.$implicit,n=m();a(3),h(n.capitalize(n.winnerMarketArray.runnersName[e.selectionId])),a(2),c("ngForOf",n.marketArray)}}function V(r,t){if(r&1&&(s(0,"div",19),p(1,"img",20),s(2,"div",21)(3,"button",22),l(4),o(),s(5,"button",23),l(6),o(),s(7,"p",24),l(8,"0"),o()()()),r&2){let e=m().$implicit,n=m();a(3),c("ngClass",(e.runners[0]==null?null:e.runners[0].status)=="SUSPEND"||(n.game==null?null:n.game.status)=="SUSPEND"||n.game.length==0?"suspended":""),a(),f(" ",e.runners[0].price.back[0].price," "),a(),c("ngClass",(e.runners[0]==null?null:e.runners[0].status)=="SUSPEND"||(n.game==null?null:n.game.status)=="SUSPEND"||n.game.length==0?"suspended":""),a(),f(" ",e.runners[0].price.lay[0].price," ")}}function U(r,t){if(r&1&&(u(0),d(1,V,9,4,"div",18),y()),r&2){let e=t.index;a(),c("ngIf",e===4)}}var D=class r{constructor(t,e,n,i){this.route=t;this.toaster=e;this.backendService=n;this.encyDecy=i;this.eventid=this.route.snapshot.params.id,this._roomId="",this.message.id=this.eventid}subscription;subscription2;videoComponent;message={type:"1",id:""};eventid;getRoundId="";runnersName={};marketArray;game;_roomId;timer;winnerMarketArray;luckyMarketArray;playerACards;playerBCards;gameroundId;isValueBetsSlip=0;marketId;selectedCell;split_arr;changeValue;RoundWinner;currentRunnerPrice;winningAmount;eventName;counter=0;theme;resultcounter=0;ngOnInit(){this.route.params.subscribe(t=>{let e=t.id}),this.encyDecy.generateEncryptionKey("",this.message),this.subscription=this.encyDecy.getMarketData().subscribe((t=[])=>{if(t){this.getRoundId=localStorage.getItem("roundID");let e=JSON.parse(t);Array.isArray(e.data)?e?.data[0]&&(e.type=="1"&&(this.marketArray=e?.data[0]?.marketArr,this.winnerMarketArray=this.game?.marketArr?this.game?.marketArr[0]:"",this.game=e?.data[0],this.game.marketArr=this.marketArray?this.marketArray:e?.data[0]?.marketArr,this.eventName=e?.data[0]?.eventName,this.winnerMarketArray=this.game?.marketArr?this.game?.marketArr[0]:"",this.luckyMarketArray=this.game?.marketArr?this.game?.marketArr[4]:""),this.handleEventResponse(e,0)):this.handleEventResponse(e,0),this.game&&(this.winnerMarketArray=this.game?.marketArr?this.game?.marketArr[0]:"",this.luckyMarketArray=this.game?.marketArr?this.game?.marketArr[4]:"",this.marketArray=this.game.marketArr,this.gameroundId=this.game.roundId,this.game.eventName=this.eventName?this.eventName:this.game.eventName,this.backendService.updateRoundId(this.game),(this.getRoundId!=this.game.roundId||this.getRoundId=="")&&(localStorage.setItem("roundID",this.game.roundId),this.getResults(),this.selectedCell="",this.marketId=""),this.game.status=="SUSPEND"&&(this.selectedCell="",this.marketId="",this.isValueBetsSlip=0),this.playerACards=this.game?.cardsArr?.PLAYER_A,this.playerBCards=this.game?.cardsArr?.PLAYER_B,this.winnerMarketArray=this.game?.marketArr?this.game?.marketArr[0]:"",this.luckyMarketArray=this.game?.marketArr?this.game?.marketArr[4]:"",this.runnersName=this.winnerMarketArray.runnersName,this.marketArray=this.game.marketArr),e.type=="3"}}),this.getResults()}handleEventResponse(t,e){if(Array.isArray(t))t.forEach(n=>{this.marketObjManager(n)});else{let n=t;this.marketObjManager(n);return}}marketObjManager(t){let e=t;if(e&&e.type=="1")if("data"in e&&this.counter==0&&e.data.marketArr&&e.data._id)this.marketArray=e.data.marketArr,this.game=this.marketArray?this.marketArray:e.data,this.game=e.data,this.eventName=e.data.eventName,this.counter=1;else{if("marketArr"in e?.data&&Array.isArray(e.data.marketArr)&&(this.game.marketArr=e?.data?.marketArr),"cardsArr"in e?.data&&(Array.isArray(e?.data?.cardsArr)||(this.game.cardsArr=e?.data?.cardsArr)),"roundId"in e&&(this.game.roundId=e?.roundId),"roundId"in e?.data&&(this.game.roundId=e?.data?.roundId),"status"in e?.data&&(this.game.status=e?.data?.status),"resultsArr"in e?.data){for(let i in e?.data?.resultsArr[0]?.runners)e.data?.resultsArr[0]?.runners[i]=="WINNER"&&(this.RoundWinner=e?.data?.resultsArr[0]?.runnersName[i],this.backendService.setResultData(this.RoundWinner)),e.data?.resultsArr[0]?.runners[i]=="WINNER"&&setTimeout(()=>{this.backendService.setResultWinningAmount(this.winningAmount),this.backendService.setResultSparkData(!0)},1e3);setTimeout(()=>{this.RoundWinner=null,this.winningAmount=null,this.backendService.setResultData(this.RoundWinner),this.backendService.setResultWinningAmount(this.winningAmount)},5e3)}var n=Object.keys(e?.data)[0];if(n.includes(".")){this.split_arr=n.split("."),Object.entries(e.data).forEach(([,j])=>this.changeValue=j);let i=parseInt(this.split_arr[1]),b=this.split_arr[3],k=this.split_arr[6];this.split_arr[7]=="size"&&(this.marketArray[i].runners[b].price.back[k].size=this.changeValue),this.split_arr[7]=="price"&&(this.marketArray[i].runners[b].price.back[k].price=this.changeValue)}}}getEventOdds(){this.backendService.getCasinoEventOdds(this.eventid).subscribe(t=>{t.meta.status_code==200?(this.game=t?.data,this.marketArray=this.game?.marketArr,this.playerACards=this.game?.cardsArr?.PLAYER_A,this.playerBCards=this.game?.cardsArr?.PLAYER_B,this.winnerMarketArray=this.game?.marketArr?this.game?.marketArr[0]:"",this.luckyMarketArray=this.game?.marketArr?this.game?.marketArr[4]:"",this.runnersName=this.winnerMarketArray.runnersName):this.toaster.error(t.meta.message,"",{positionClass:"toast-top-right"})})}trackByFn(t,e){return t}ngAfterViewInit(){}getResults(){this.backendService.getAllRecordsByPost(O.getCasinoResultURL,{eventId:this.eventid}).pipe(v()).subscribe(t=>{this.backendService.updateResultstream(t.data)},t=>{let e=t})}ngOnDestroy(){let t={type:"2",id:""};this.subscription&&this.subscription.unsubscribe(),this.subscription2&&this.subscription2.unsubscribe(),this.encyDecy.sendMessageToSocket(t),this.subscription&&this.subscription.unsubscribe()}capitalize(t){return t?t.replace(/\w\S*/g,e=>e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()):""}static \u0275fac=function(e){return new(e||r)(g(I),g(R),g(E),g(z))};static \u0275cmp=A({type:r,selectors:[["app-baccarat-29"]],viewQuery:function(e,n){if(e&1&&_(x,5),e&2){let i;C(i=M())&&(n.videoComponent=i.first)}},decls:9,vars:2,consts:[[1,"videoPlayer"],[1,"parent-class","font-noto-sans"],[1,"players-container"],["class","player-A-container",4,"ngFor","ngForOf"],[1,"border-verticall"],[4,"ngFor","ngForOf"],[1,"showInMobile"],[1,"player-A-container"],[1,"player-title"],[1,"Player-text"],[1,"btns-headings"],["class","cover",4,"ngIf"],[1,"cover"],[1,"heading"],[1,"btns","position-relative",3,"ngClass"],[1,"d-flex","justify-content-center","align-items-center"],[1,"btn-text"],[1,"btn-bottom-zero"],["class","lucky-nine-container",4,"ngIf"],[1,"lucky-nine-container"],["src","/assets/baccarat-29/lucky9.png","alt","",1,"lucky-nine-img","w-auto"],[1,"bottom-btn-wraper"],[1,"left-btn","position-relative",3,"ngClass"],[1,"right-btn","position-relative",3,"ngClass"],[1,"bottom-zero"]],template:function(e,n){e&1&&(s(0,"div",0),p(1,"app-video-player"),o(),s(2,"div",1)(3,"div",2),d(4,F,6,2,"div",3),p(5,"div",4),o(),d(6,U,2,1,"ng-container",5),s(7,"div",6),p(8,"app-resultbar"),o()()),e&2&&(a(4),c("ngForOf",n.winnerMarketArray==null?null:n.winnerMarketArray.runners),a(2),c("ngForOf",n.marketArray))},dependencies:[x,P,w,S,N],styles:[".parent-class[_ngcontent-%COMP%]{padding:5px;background-color:#f8f8fb;border-radius:0 0 8px 8px;box-shadow:0 2px 6px #e2e2e2}.players-container[_ngcontent-%COMP%]{display:flex;display:-webkit-flex;flex-wrap:wrap;justify-content:space-between}.player-A-container[_ngcontent-%COMP%]{width:49%}.Player-text[_ngcontent-%COMP%]{color:#fc4242!important;text-align:center;font-size:14px;line-height:22px}.player-title[_ngcontent-%COMP%]{height:24px}.b-text[_ngcontent-%COMP%]{color:#ef910f!important;text-align:center;font-size:14px}.heading[_ngcontent-%COMP%]{height:26px;text-transform:uppercase;display:flex;justify-content:center;align-items:center;position:relative;text-align:center;font-size:12px;line-height:12px;color:#000}.btns[_ngcontent-%COMP%]{width:calc(100% - 4px);height:40px!important;text-transform:uppercase;position:relative;border-radius:4px;text-align:center;border:2px solid #72bbef;display:flex;flex-direction:column;justify-content:center;align-items:center;font-weight:700;padding:0!important}.btn-text[_ngcontent-%COMP%]{font-size:13px;line-height:16px;color:#333}.btns-headings[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center}.lock-wraper[_ngcontent-%COMP%]{background-color:#dae1e0;width:100%;height:100%;position:absolute;top:0%;left:0%;z-index:20}.lock-icon[_ngcontent-%COMP%]{width:15px;height:15px}.border-verticall[_ngcontent-%COMP%]{width:2px;background-color:#e0e0e0}.btn-bottom-zero[_ngcontent-%COMP%]{font-size:11px;line-height:12px;font-weight:400}.lucky-nine-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-top:24.5px}.lucky-nine-img[_ngcontent-%COMP%]{height:70px;z-index:10}.bottom-btn-wraper[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-wrap:wrap;position:relative;margin-top:-2px}.left-btn[_ngcontent-%COMP%]{margin-left:-4px;margin-right:4px;border-right:0;border-radius:0;border-left:0;width:80px;border:2px solid #72bbef;border-right:0px!important;height:40px;font-size:13px;font-weight:700;line-height:16px;background:#72bbef17}.right-btn[_ngcontent-%COMP%]{margin-left:-4px;margin-right:4px;border-left:0!important;border-radius:0;border:2px solid #f994ba;width:80px;height:40px;font-size:13px;font-weight:700;line-height:16px;background:#f994ba17}.bottom-zero[_ngcontent-%COMP%]{position:absolute;bottom:-40px;left:50%;transform:translate(-50%);z-index:50;font-size:11px;color:#333;line-height:22px}.cover[_ngcontent-%COMP%]{width:100%;margin-top:10px;height:66px;display:flex;flex-direction:column;justify-content:center;align-items:center;margin-right:4px}@media screen and (min-width: 767px){.parent-class[_ngcontent-%COMP%]{padding:5px 5px 40px}.btns-headings[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.btns[_ngcontent-%COMP%]{width:100%}.btns-headings[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center}.btn-text[_ngcontent-%COMP%], .btn-bottom-zero[_ngcontent-%COMP%]{font-size:12px}.cover[_ngcontent-%COMP%]{width:calc(25% - 3px);margin-right:4px;height:64px;display:flex;flex-direction:column;justify-content:center;align-items:center;margin-top:0!important}.last-item[_ngcontent-%COMP%]{margin-right:0!important}.lucky-nine-img[_ngcontent-%COMP%]{height:100px;z-index:10}.left-btn[_ngcontent-%COMP%]{margin-left:-4px;border-right:0;border-radius:0;border-left:0;width:150px;height:40px;font-size:12px;line-height:16px;color:#333}.right-btn[_ngcontent-%COMP%]{margin-left:-4px;border-left:0!important;border-radius:0;width:150px;height:40px;font-size:12px;line-height:16px;font-weight:700;color:#333}.Player-text[_ngcontent-%COMP%]{color:#fc4242!important;text-align:start;font-size:14px}.b-text[_ngcontent-%COMP%]{color:#ef910f!important;text-align:start;font-size:14px}.heading[_ngcontent-%COMP%]{height:24px}.bottom-zero[_ngcontent-%COMP%]{font-size:14px;color:#000}.lucky-nine-container[_ngcontent-%COMP%]{margin-top:20px}.bottom-btn-wraper[_ngcontent-%COMP%]{margin-top:0}}"]})};export{D as Baccarat29Component};
