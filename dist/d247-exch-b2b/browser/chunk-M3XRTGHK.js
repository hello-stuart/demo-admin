import{a as O}from"./chunk-DW4XPVKQ.js";import{a as T}from"./chunk-AZX2OHK4.js";import{a as P}from"./chunk-AWYQW5EK.js";import{c as F,d as D}from"./chunk-A5YAUSYP.js";import{a as w}from"./chunk-5UJXZMZS.js";import"./chunk-ACVM4ET5.js";import"./chunk-QZIUMNBJ.js";import{m as R,q as N}from"./chunk-6542H3SY.js";import{f as b}from"./chunk-F4ECYANF.js";import{Db as a,Nb as s,O as _,Ob as o,Pb as g,Qb as l,Rb as m,Sc as C,Tc as S,Uc as k,Wb as p,_c as I,bb as r,cb as d,dc as u,ec as y,fc as x,hd as E,mb as A,sb as c}from"./chunk-CKWEI2SK.js";import"./chunk-ZR4K4ZIC.js";function M(n,e){if(n&1&&(s(0,"div",6)(1,"div",7),u(2),o(),s(3,"div",8)(4,"span"),u(5),o()(),s(6,"div",9),u(7,"0"),o()()),n&2){let t=p().$implicit,i=p(3);a("ngClass",i.winnerMarketArray.runners[0].status=="SUSPEND"||i.game.status=="SUSPEND"?"suspended":i.selectedCell==i.winnerMarketArray.runners[0].selectionId?"selected":""),r(2),y(t.price.back[0].price),r(3),x(" ",i.marketArray[0]==null?null:i.marketArray[0].runnersName[t==null?null:t.selectionId],"")}}function W(n,e){if(n&1&&(l(0),c(1,M,8,3,"div",5),m()),n&2){let t=e.index;r(),a("ngIf",t===0)}}function B(n,e){if(n&1&&(l(0),c(1,W,2,1,"ng-container",2),m()),n&2){let t=p().$implicit;r(),a("ngForOf",t==null?null:t.runners)}}function U(n,e){if(n&1&&(l(0),c(1,B,2,1,"ng-container",4),m()),n&2){let t=e.index;r(),a("ngIf",t===0)}}function V(n,e){if(n&1&&(s(0,"div",11)(1,"div",12)(2,"div",13),g(3,"img",14),o()()()),n&2){let t=p(2);r(2),a("ngClass",t.winnerMarketArray.runners[0].status=="SUSPEND"||t.game.status=="SUSPEND"?"suspended":t.selectedCell==t.winnerMarketArray.runners[0].selectionId?"selected":"")}}function $(n,e){if(n&1&&(l(0),c(1,V,4,1,"div",10),m()),n&2){let t=e.index;r(),a("ngIf",t===1)}}function z(n,e){if(n&1&&(s(0,"div",16)(1,"div",7),u(2),o(),s(3,"div",8)(4,"span"),u(5),o()(),s(6,"div",9),u(7,"0"),o()()),n&2){let t=p().$implicit,i=p(3);a("ngClass",i.winnerMarketArray.runners[0].status=="SUSPEND"||i.game.status=="SUSPEND"?"suspended":i.selectedCell==i.winnerMarketArray.runners[0].selectionId?"selected":""),r(2),y(t.price.back[0].price),r(3),y(i.marketArray[0]==null?null:i.marketArray[0].runnersName[t==null?null:t.selectionId])}}function Y(n,e){if(n&1&&(l(0),c(1,z,8,3,"div",15),m()),n&2){let t=e.index;r(),a("ngIf",t===1)}}function G(n,e){if(n&1&&(l(0),c(1,Y,2,1,"ng-container",2),m()),n&2){let t=p().$implicit;r(),a("ngForOf",t==null?null:t.runners)}}function J(n,e){if(n&1&&(l(0),c(1,G,2,1,"ng-container",4),m()),n&2){let t=e.index;r(),a("ngIf",t===0)}}var L=class n{constructor(e,t,i,h,f,v,K){this.route=e;this.toaster=t;this.casinoService=i;this.backendService=h;this.mainService=f;this.encyDecy=v;this.conditionhandlerService=K;this.eventid=this.route.snapshot.params.id,this._roomId="",this.message.id=this.eventid,this.messageResult.id=this.eventid}message={type:"1",id:""};messageResult={type:"3",id:""};eventid;getRoundId="";myVideo=null;runnersName={};marketArray;selectedResult;resultArray;game;_roomId;timer;winnerMarketArray;playerACards;playerBCards;gameroundId;Card;marketId;eventName;split_arr;changeValue;counter=0;selectedCell;currentRunnerPrice;RoundWinner;betSelectedPlayer;playerMarket;bankerMarket;tieMarketArray;tieMarket;pairMarketArray;pairPlayer;pairBanker;subscription;subscription2;winningAmount;ngOnDestroy(){let e={type:"2",id:""};this.encyDecy.sendMessageToSocket(e),this.subscription&&this.subscription.unsubscribe(),this.subscription2&&this.subscription2.unsubscribe()}ngOnInit(){this.encyDecy.generateEncryptionKey("",this.message),this.subscription=this.encyDecy.getMarketData().subscribe((e=[])=>{if(this.casinoService=e,e){this.getRoundId=localStorage.getItem("roundID");let t=JSON.parse(e);Array.isArray(t.data)?(t.type=="1"&&(this.marketArray=t.data[0].marketArr,this.game=t.data[0],this.game.marketArr=this.marketArray?this.marketArray:t.data[0].marketArr,this.eventName=t.data[0].eventName,this.winnerMarketArray=this.game?.marketArr?this.game?.marketArr[0]:""),this.handleEventResponse(t,0)):this.handleEventResponse(t,0),this.game&&(this.winnerMarketArray=this.game?.marketArr?this.game?.marketArr[0]:"",this.marketArray=this.game.marketArr,this.gameroundId=this.game.roundId,this.game.eventName=this.eventName?this.eventName:this.game.eventName,this.backendService.updateRoundId(this.game),(this.getRoundId!=this.game.roundId||this.getRoundId=="")&&(localStorage.setItem("roundID",this.game.roundId),this.getResults(),this.selectedCell="",this.betSelectedPlayer=""),this.Card=this.game?.cardsArr?.card,this.winnerMarketArray=this.game.marketArr?this.game.marketArr[0]:"",this.runnersName=this.winnerMarketArray.runnersName,this.marketArray=this.game.marketArr)}}),this.getResults()}intoNumber(e){return e.replace("%",""),parseInt(e)}handleEventResponse(e,t){if(Array.isArray(e))e.forEach(i=>{this.marketObjManager(i)});else{let i=e;this.marketObjManager(i);return}}marketObjManager(e){if(e.type=="1")if("data"in e&&this.counter==0&&e.data.marketArr&&e.data._id)this.marketArray=e.data.marketArr,this.game=this.marketArray?this.marketArray:e.data,this.game=e.data,this.eventName=e.data.eventName,this.counter=1;else{if("marketArr"in e?.data&&Array.isArray(e.data.marketArr)&&(this.game.marketArr=e.data.marketArr),"cardsArr"in e?.data&&(Array.isArray(e.data.cardsArr)||(this.game.cardsArr=e.data.cardsArr)),"roundId"in e&&(this.game.roundId=e.roundId),"status"in e?.data&&(this.game.status=e.data.status),"resultsArr"in e?.data){for(let i in e?.data?.resultsArr[0]?.runners)e.data?.resultsArr[0]?.runners[i]=="WINNER"&&(this.RoundWinner=e?.data?.resultsArr[0]?.runnersName[i],this.backendService.setResultData(this.RoundWinner)),i==this.betSelectedPlayer&&e.data?.resultsArr[0]?.runners[i]=="WINNER"&&setTimeout(()=>{this.backendService.setResultWinningAmount(this.winningAmount),this.backendService.setResultSparkData(!0)},1e3);setTimeout(()=>{this.RoundWinner=null,this.winningAmount=null,this.backendService.setResultWinningAmount(this.winningAmount),this.backendService.setResultData(this.RoundWinner)},5e3)}var t=Object.keys(e.data)[0];if(t.includes(".")){this.split_arr=t.split("."),Object.entries(e.data).forEach(([,v])=>this.changeValue=v);let i=parseInt(this.split_arr[1]),h=this.split_arr[3],f=this.split_arr[6];this.split_arr[7]=="size"&&(this.marketArray[i].runners[h].price.back[f].size=this.changeValue),this.split_arr[7]=="price"&&(this.marketArray[i].runners[h].price.back[f].price=this.changeValue)}}}getResults(){this.backendService.getAllRecordsByPost(E.getCasinoResultURL,{eventId:this.eventid}).pipe(_()).subscribe(e=>{this.backendService.updateResultstream(e.data)},e=>{let t=e})}getEventOdds(){this.backendService.getCasinoEventOdds(this.eventid).subscribe(e=>{e.meta.status_code==200?(this.game=e?.data,this.marketArray=this.game?.marketArr,this.playerACards=this.game?.cardsArr?.PLAYER_A,this.playerBCards=this.game?.cardsArr?.PLAYER_B,this.winnerMarketArray=this.game?.marketArr?this.game.marketArr[0]:"",this.runnersName=this.winnerMarketArray.runnersName):this.toaster.error(e.meta.message,"",{positionClass:"toast-top-right"})})}static \u0275fac=function(t){return new(t||n)(d(b),d(R),d(T),d(N),d(O),d(D),d(w))};static \u0275cmp=A({type:n,selectors:[["app-fast-lucy7"]],decls:9,vars:3,consts:[[1,"casino-detail"],[1,"w-100","d-flex","justify-content-center"],[4,"ngFor","ngForOf"],[1,"showInMobile"],[4,"ngIf"],["class","low-odds-box",3,"ngClass",4,"ngIf"],[1,"low-odds-box",3,"ngClass"],[1,"casino-odd-value"],[1,"text-center","casino-btns"],[1,"casino-book-value"],["class"," lucky-7-card-box",4,"ngIf"],[1,"lucky-7-card-box"],[1,"position-relative"],[1,"text-center",3,"ngClass"],["src","/assets/casino-cards/card-seven.png","alt","",1,"img-fluid"],["class","high-odds-box",3,"ngClass",4,"ngIf"],[1,"high-odds-box",3,"ngClass"]],template:function(t,i){t&1&&(s(0,"div"),g(1,"app-video-player"),o(),s(2,"div",0)(3,"div",1),c(4,U,2,1,"ng-container",2)(5,$,2,1,"ng-container",2)(6,J,2,1,"ng-container",2),o(),s(7,"div",3),g(8,"app-resultbar"),o()()),t&2&&(r(4),a("ngForOf",i.marketArray),r(),a("ngForOf",i.marketArray),r(),a("ngForOf",i.marketArray))},dependencies:[I,C,S,k,P,F],styles:[".casino-detail[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;padding:10px 10px 40px;background-color:#f8f8fb;border-radius:0 0 8px 8px;box-shadow:0 2px 6px #e2e2e2}.low-odds-box[_ngcontent-%COMP%]{background-color:#434343;border:5px solid #fc4242;color:#fff;width:33.33%;padding:6px;height:76px;border-radius:0;display:flex;flex-direction:column;justify-content:center;align-items:center;cursor:pointer;position:relative}.casino-odd-value[_ngcontent-%COMP%]{font-weight:700;text-align:center;width:100%;line-height:18px;color:#fff;position:relative}.casino-book-value[_ngcontent-%COMP%]{color:#333;position:absolute;bottom:-25px;font-size:18px!important;line-height:18px!important}.lucky-7-card-box[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:33.33%;background-color:#43434333;padding:6px}.img-fluid[_ngcontent-%COMP%]{height:60px}.high-odds-box[_ngcontent-%COMP%]{background-color:#434343;border:5px solid #03b37f;color:#fff;width:33.33%;padding:6px;height:76px;border-radius:0;display:flex;flex-direction:column;justify-content:center;align-items:center;cursor:pointer;position:relative}"]})};export{L as FastLucy7Component};
